<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #1a1a2e;
            font-family: monospace;
        }
        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 8px;
            max-width: 500px;
        }
        .success { color: #2ecc71; }
        .error { color: #e74c3c; }
        .warning { color: #f39c12; }
    </style>
</head>
<body>
    <div id="info">
        <h2>ğŸ” Three.js ë””ë²„ê·¸ í…ŒìŠ¤íŠ¸</h2>
        <div id="status">í…ŒìŠ¤íŠ¸ ì¤‘...</div>
    </div>

    <!-- Three.js Import Map -->
    <script type="importmap">
    {
        "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
    }
    </script>

    <script type="module">
        const statusDiv = document.getElementById('status');
        
        function addStatus(message, type = 'success') {
            const p = document.createElement('p');
            p.className = type;
            p.innerHTML = message;
            statusDiv.appendChild(p);
        }

        // 1ë‹¨ê³„: Three.js ë¡œë“œ í…ŒìŠ¤íŠ¸
        try {
            addStatus('1ï¸âƒ£ Three.js import ì‹œë„ ì¤‘...', 'warning');
            
            const THREE = await import('three');
            addStatus('âœ… Three.js ë¡œë“œ ì„±ê³µ!', 'success');
            addStatus(`ğŸ“¦ Three.js ë²„ì „: ${THREE.REVISION}`, 'success');
            
        } catch (error) {
            addStatus('âŒ Three.js ë¡œë“œ ì‹¤íŒ¨!', 'error');
            addStatus(`ì—ëŸ¬: ${error.message}`, 'error');
            console.error('Three.js import ì—ëŸ¬:', error);
        }

        // 2ë‹¨ê³„: OrbitControls ë¡œë“œ í…ŒìŠ¤íŠ¸
        try {
            addStatus('2ï¸âƒ£ OrbitControls import ì‹œë„ ì¤‘...', 'warning');
            
            const { OrbitControls } = await import('three/addons/controls/OrbitControls.js');
            addStatus('âœ… OrbitControls ë¡œë“œ ì„±ê³µ!', 'success');
            
        } catch (error) {
            addStatus('âŒ OrbitControls ë¡œë“œ ì‹¤íŒ¨!', 'error');
            addStatus(`ì—ëŸ¬: ${error.message}`, 'error');
            console.error('OrbitControls import ì—ëŸ¬:', error);
        }

        // 3ë‹¨ê³„: ê°„ë‹¨í•œ 3D ì”¬ ìƒì„±
        try {
            addStatus('3ï¸âƒ£ 3D ì”¬ ìƒì„± ì‹œë„ ì¤‘...', 'warning');
            
            const THREE = await import('three');
            const { OrbitControls } = await import('three/addons/controls/OrbitControls.js');
            
            // ì”¬ ìƒì„±
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0x1a1a2e);
            
            // ì¹´ë©”ë¼ ìƒì„±
            const camera = new THREE.PerspectiveCamera(
                75,
                window.innerWidth / window.innerHeight,
                0.1,
                1000
            );
            camera.position.z = 5;
            
            // ë Œë”ëŸ¬ ìƒì„±
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);
            
            // OrbitControls ìƒì„±
            const controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            
            // ì¡°ëª… ì¶”ê°€
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(5, 10, 5);
            scene.add(directionalLight);
            
            // íë¸Œ ìƒì„±
            const geometry = new THREE.BoxGeometry(2, 2, 2);
            const material = new THREE.MeshStandardMaterial({ 
                color: 0x3498db,
                metalness: 0.5,
                roughness: 0.5
            });
            const cube = new THREE.Mesh(geometry, material);
            scene.add(cube);
            
            addStatus('âœ… 3D ì”¬ ìƒì„± ì„±ê³µ!', 'success');
            addStatus('ğŸ¨ íŒŒë€ìƒ‰ íë¸Œê°€ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤', 'success');
            
            // ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„
            function animate() {
                requestAnimationFrame(animate);
                cube.rotation.x += 0.01;
                cube.rotation.y += 0.01;
                controls.update();
                renderer.render(scene, camera);
            }
            animate();
            
            addStatus('âœ… ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘!', 'success');
            addStatus('ğŸ–±ï¸ ë§ˆìš°ìŠ¤ë¡œ íšŒì „í•´ë³´ì„¸ìš”', 'success');
            
            // ìœˆë„ìš° ë¦¬ì‚¬ì´ì¦ˆ
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
            
        } catch (error) {
            addStatus('âŒ 3D ì”¬ ìƒì„± ì‹¤íŒ¨!', 'error');
            addStatus(`ì—ëŸ¬: ${error.message}`, 'error');
            console.error('ì”¬ ìƒì„± ì—ëŸ¬:', error);
        }

        // ì½˜ì†”ì— ì¶”ê°€ ì •ë³´ ì¶œë ¥
        console.log('ğŸ” ë¸Œë¼ìš°ì € ì •ë³´:', navigator.userAgent);
        console.log('ğŸ” í˜„ì¬ URL:', window.location.href);
        console.log('ğŸ” Import Map:', document.querySelector('script[type="importmap"]')?.textContent);
    </script>
</body>
</html>