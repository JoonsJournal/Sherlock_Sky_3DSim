/**
 * main.css
 * ========
 * SHERLOCK SKY 3DSim - CSS ì§„ì…ì 
 * 
 * @version 4.1.0 (Phase 3: BEM Components Refactoring)
 * @updated 2026-01-17
 * @changelog
 * - v4.1.0: Ranking View CSS ì¶”ê°€
 *   - ranking-view/ ì„œë¸Œí´ë” CSS import
 *   - âš ï¸ í˜¸í™˜ì„±: ê¸°ì¡´ ëª¨ë“  ìŠ¤íƒ€ì¼ 100% ìœ ì§€
 * [ARCHITECTURE]
 * Layer 1: Design Tokens (primitives, semantic-light, semantic-dark, legacy-mapping)
 * Layer 2: Utilities (layout, spacing, text, position, effects)
 * Layer 3: Base Styles (reset, typography)
 * Layer 4: Components - BEM êµ¬ì¡° (ì„œë¸Œí´ë”ë³„ ë¶„ë¦¬)
 * Layer 5: Pages (viewer-3d, layout-editor)
 * 
 * [CHANGELOG]
 * - v4.0.0: Phase 3 BEM Components ë¦¬íŒ©í† ë§
 *   - components/ ì„œë¸Œí´ë” êµ¬ì¡° ì ìš©
 *   - BEM ë„¤ì´ë° ê·œì¹™ ì „ë©´ ì ìš©
 *   - í•˜ìœ„ í˜¸í™˜ì„± ìœ ì§€ (legacy alias)
 * 
 * - v3.1.0: Utilities ë ˆì´ì–´ ì¶”ê°€
 * - v3.0.0: Design Token ì•„í‚¤í…ì²˜ ì „í™˜
 * 
 * ìœ„ì¹˜: frontend/threejs_viewer/styles/main.css
 */

/* =============================================
   Layer 1: Design Tokens
   =============================================
   ìƒˆë¡œìš´ í† í° ì‹œìŠ¤í…œ - _variables.cssì—ì„œ importë¨
   ============================================= */
@import './base/_variables.css';

/* =============================================
   Layer 2: Utility Classes
   =============================================
   BEMê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤
   - u-flex, u-p-4, u-glass ë“±
   - ì»´í¬ë„ŒíŠ¸ë³´ë‹¤ ë¨¼ì € ë¡œë“œí•˜ì—¬ ì˜¤ë²„ë¼ì´ë“œ ê°€ëŠ¥
   ============================================= */
@import './utilities/_layout.css';
@import './utilities/_spacing.css';
@import './utilities/_text.css';
@import './utilities/_position.css';
@import './utilities/_effects.css';

/* =============================================
   Layer 3: Base Styles
   ============================================= */
@import './base/_reset.css';
@import './base/_typography.css';

/* =============================================
   Layer 4: Components - Common (ê³µí†µ)
   =============================================
   ê¸°ë³¸ UI ì»´í¬ë„ŒíŠ¸ (BEM ë¦¬íŒ©í† ë§)
   ============================================= */
@import './components/common/_button.css';
@import './components/common/_modal.css';
@import './components/common/_panel.css';
@import './components/common/_form.css';
@import './components/common/_toast.css';

/* =============================================
   Layer 4: Components - Sidebar
   =============================================
   ì‚¬ì´ë“œë°” ì‹œìŠ¤í…œ (BEM ë¦¬íŒ©í† ë§)
   ============================================= */
@import './components/sidebar/_sidebar.css';
@import './components/sidebar/_submenu.css';

/* =============================================
   Layer 4: Components - Equipment Info
   =============================================
   Equipment Info Panel ì‹œìŠ¤í…œ (BEM ë¦¬íŒ©í† ë§)
   ============================================= */
@import './components/equipment-info/_equipment-panel.css';
@import './components/equipment-info/_equipment-drawer.css';  /* ğŸ†• Drawer ì¶”ê°€ */
@import './components/equipment-info/_info-row.css';
@import './components/equipment-info/_status-indicator.css';

/* =============================================
   Layer 4: Components - Ranking View
   =============================================
   Ranking View ì‹œìŠ¤í…œ (BEM ë¦¬íŒ©í† ë§)
   
   ì¶”ê°€ ìœ„ì¹˜: Layer 4: Components - Equipment Info ì„¹ì…˜ ë‹¤ìŒ
   (ì•½ 73í–‰ @import './components/equipment-info/_status-indicator.css'; ë‹¤ìŒ)
   ============================================= */
@import './components/ranking-view/_ranking-view.css';
@import './components/ranking-view/_ranking-lane.css';
@import './components/ranking-view/_lane-header.css';

/* Phase 2ì—ì„œ ì¶”ê°€ ì˜ˆì • */
/* @import './components/ranking-view/_equipment-card.css'; */
@import './components/ranking-view/_equipment-card.css';
/* Phase 6ì—ì„œ ì¶”ê°€ ì˜ˆì • */
/* @import './components/ranking-view/_mini-timeline.css'; */
/* @import './components/ranking-view/_animations.css'; */

/* =============================================
   Layer 4: Components - Legacy (ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜)
   =============================================
   ì•„ì§ BEM ë¦¬íŒ©í† ë§ë˜ì§€ ì•Šì€ ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸
   ì¶”í›„ Phase 3 í™•ì¥ ì‹œ ì„œë¸Œí´ë”ë¡œ ì´ë™ ì˜ˆì •
   ============================================= */

/* Modal ì‹œìŠ¤í…œ - Legacy */
@import './components/_equipment-edit-modal.css';
@import './components/_recovery-dialog.css';
@import './components/_connection-modal.css';

/* Indicator ì‹œìŠ¤í…œ - Legacy */
@import './components/_connection-indicator.css'; 
@import './components/_autosave-indicator.css'; 

/* Panel ì‹œìŠ¤í…œ - Legacy */
@import './components/_connection-panels.css';

/* ê³µí†µ UI - Legacy */
@import './components/_common-ui.css';
@import './components/_file-controls.css';
@import './components/_equipment-edit-button.css';

/* Status Bar & Cover Screen */
@import './components/_status-bar.css';
@import './components/_cover-screen.css';

/* Mode Indicator Panel */
@import './components/_mode-indicator.css';

/* Analysis Mode */
@import './components/_analysis-mode.css';

/* Miscellaneous */
@import './components/_misc.css';
@import './components/_overlay-ui.css';

/* =============================================
   Layer 5: Page Styles
   ============================================= */
@import './pages/_viewer-3d.css';
@import './pages/_layout-editor.css';

/* ============================================
   Monitoring Mode Status Panel
   ì„ íƒìë¥¼ .status-panel ë²”ìœ„ë¡œ í•œì •
   StatusBarì˜ .status-item, .status-label, .status-valueì™€ ì¶©ëŒ ë°©ì§€
   ============================================ */

.status-panel .status-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-1-5);
}

.status-panel .status-icon {
    font-size: var(--font-size-md);
}

.status-panel .status-icon.connected {
    color: var(--interactive-success);
}

.status-panel .status-icon.disconnected {
    color: var(--interactive-warning);
}

.status-panel .status-label {
    color: var(--content-muted);
    font-size: var(--font-size-sm);
}

.status-panel .status-value {
    color: var(--content-primary);
    font-weight: var(--font-weight-semibold);
    font-size: var(--font-size-base);
    font-family: var(--font-family-mono);
}

.status-panel .status-divider {
    color: var(--border-default);
    font-size: var(--font-size-base);
    margin: 0 var(--spacing-1);
}

.status-panel .status-progress-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-1);
}

.status-panel .status-progress {
    position: relative;
    width: 120px;
    height: 6px;
    background: var(--surface-secondary);
    border-radius: var(--radius-sm);
    overflow: hidden;
}

.status-panel .progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--interactive-success), #8bc34a);
    border-radius: var(--radius-sm);
    transition: width var(--transition-slow);
}

.status-panel .progress-text {
    font-size: var(--font-size-xs);
    color: var(--content-muted);
    white-space: nowrap;
    font-family: var(--font-family-mono);
}

/* ============================================
   Equipment Labels (CSS2D)
   ============================================ */

.equipment-label {
    pointer-events: none;
    user-select: none;
    white-space: nowrap;
    font-family: var(--font-family-mono);
}

.equipment-label.unmapped {
    background: rgba(255, 87, 34, 0.9);
    color: white;
    padding: var(--spacing-1) var(--spacing-2);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-bold);
    animation: pulse-warning 2s ease-in-out infinite;
}

@keyframes pulse-warning {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.8; transform: scale(1.05); }
}

/* ============================================
   Monitoring Mode Button Active State
   ============================================ */

#monitoringBtn.active {
    background: linear-gradient(135deg, #ff5722, #ff9800) !important;
    box-shadow: 0 0 20px rgba(255, 87, 34, 0.5);
    animation: monitoring-pulse 2s ease-in-out infinite;
}

@keyframes monitoring-pulse {
    0%, 100% { box-shadow: 0 0 10px rgba(255, 87, 34, 0.3); }
    50% { box-shadow: 0 0 25px rgba(255, 87, 34, 0.6); }
}

/* ============================================
   Legend Panel (Monitoring Mode)
   ============================================ */

.monitoring-legend {
    position: fixed;
    top: 100px;
    left: 20px;
    background: var(--surface-glass);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-3);
    z-index: var(--z-dropdown);
    box-shadow: var(--glass-shadow);
}

body:has(.sidebar) .monitoring-legend {
    left: calc(var(--sidebar-width) + 20px);
}

.legend-title {
    color: var(--content-primary);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--spacing-2);
    padding-bottom: var(--spacing-2);
    border-bottom: 1px solid var(--border-subtle);
}

.legend-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    margin: var(--spacing-1-5) 0;
    font-size: var(--font-size-xs);
    color: var(--content-secondary);
}

.legend-color {
    width: 16px;
    height: 16px;
    border-radius: var(--radius-sm);
}

.legend-color.connected {
    background: var(--interactive-success);
    box-shadow: var(--glow-success, none);
}

.legend-color.disconnected {
    background: var(--content-muted);
    opacity: 0.5;
}

/* ============================================
   Theme Transition Support
   ============================================ */

html[data-theme] * {
    transition-property: background-color, border-color, color, box-shadow;
    transition-duration: var(--transition-base);
    transition-timing-function: ease;
}

/* íŠ¸ëœì§€ì…˜ ì œì™¸ ìš”ì†Œ */
html[data-theme] canvas,
html[data-theme] video,
html[data-theme] iframe {
    transition: none;
}

html[data-theme] .toast,
html[data-theme] .toast *,
html[data-theme] .toast-container {
    transition: none;
}

/* Three.js ì»¨í…Œì´ë„ˆ íŠ¸ëœì§€ì…˜ ì œì™¸ */
html[data-theme] #threejs-container,
html[data-theme] #threejs-container * {
    transition: none;
}
