/**
 * _animations.css
 * ===============
 * Ranking View ì• ë‹ˆë©”ì´ì…˜ í‚¤í”„ë ˆì„ ë° ìŠ¤íƒ€ì¼
 * 
 * Block: .equipment-card (animation modifiers)
 * 
 * @version 1.1.0
 * @updated 2026-01-17
 * 
 * @changelog
 * - v1.1.0 (2026-01-17)
 *   - [FIX] `.equipment-card--animating` z-index 100ìœ¼ë¡œ ë³€ê²½ (ë ˆì¸ ì•ìœ¼ë¡œ)
 *   - [FIX] position: fixed ì¶”ê°€ë¡œ ë ˆì¸ ë°–ì—ì„œ ì• ë‹ˆë©”ì´ì…˜
 *   - [ADD] `.equipment-card--ghost` - ì›ë³¸ ìœ„ì¹˜ ìœ ì§€ìš© í”Œë ˆì´ìŠ¤í™€ë”
 *   - [ADD] `.ranking-lane--target` - ëª©í‘œ ë ˆì¸ í•˜ì´ë¼ì´íŠ¸
 *   - [ADD] `.equipment-card--lifting` - ë– ì˜¤ë¦„ ì• ë‹ˆë©”ì´ì…˜
 * 
 * [Animations]
 * - ranking-card-enter: ì¹´ë“œ ì§„ì… ì• ë‹ˆë©”ì´ì…˜
 * - ranking-card-leave: ì¹´ë“œ í‡´ì¥ ì• ë‹ˆë©”ì´ì…˜
 * - ranking-card-lift: ì¹´ë“œ ë– ì˜¤ë¦„ ì• ë‹ˆë©”ì´ì…˜ (NEW)
 * - ranking-pulse-warning: ê²½ê³  í„ìŠ¤ (5ë¶„ ì´ˆê³¼)
 * - ranking-pulse-danger: ìœ„í—˜ í„ìŠ¤ (10ë¶„ ì´ˆê³¼)
 * - ranking-pulse-critical: ê¸´ê¸‰ í„ìŠ¤ (15ë¶„ ì´ˆê³¼)
 * - ranking-shimmer: ë¡œë”© ì‹œë¨¸ íš¨ê³¼
 * - ranking-glow: ì„ íƒ ì‹œ ê¸€ë¡œìš° íš¨ê³¼
 * 
 * [Animation Modifiers]
 * .equipment-card--animating     â†’ ì• ë‹ˆë©”ì´ì…˜ ì¤‘ (ë ˆì¸ ìœ„ë¡œ ë„ì›€)
 * .equipment-card--entering      â†’ ì§„ì… ì¤‘
 * .equipment-card--leaving       â†’ í‡´ì¥ ì¤‘
 * .equipment-card--pushed        â†’ ë°€ë¦¼ ì¤‘
 * .equipment-card--lifting       â†’ ë– ì˜¤ë¦„ ì¤‘ (NEW)
 * .equipment-card--ghost         â†’ ì›ë³¸ ìœ„ì¹˜ ìœ ì§€ (NEW)
 * .equipment-card--urgency-*     â†’ ê¸´ê¸‰ë„ í‘œì‹œ
 * 
 * ğŸ“ ìœ„ì¹˜: frontend/threejs_viewer/styles/components/ranking-view/_animations.css
 */

/* =============================================
   CSS Custom Properties (Animation)
   ============================================= */
:root {
    /* Animation Durations */
    --ranking-duration-fast: 150ms;
    --ranking-duration-base: 200ms;
    --ranking-duration-normal: 300ms;
    --ranking-duration-slow: 400ms;
    --ranking-duration-lift: 150ms;
    --ranking-duration-push: 250ms;
    --ranking-duration-move: 450ms;
    
    /* Animation Easing */
    --ranking-ease-out: cubic-bezier(0.25, 1, 0.5, 1);
    --ranking-ease-in: cubic-bezier(0.5, 0, 0.75, 0);
    --ranking-ease-in-out: cubic-bezier(0.65, 0, 0.35, 1);
    --ranking-ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
    --ranking-ease-spring: cubic-bezier(0.5, 0, 0.2, 1.5);
    
    /* Pulse Colors */
    --ranking-pulse-warning-color: rgba(234, 179, 8, 0.4);
    --ranking-pulse-danger-color: rgba(239, 68, 68, 0.4);
    --ranking-pulse-critical-color: rgba(220, 38, 38, 0.5);
    
    /* Z-index Layers (Animation specific) */
    --z-index-card-animating: 100;
}

/* =============================================
   Keyframes: Card Enter/Leave
   ============================================= */

/* ì¹´ë“œ ì§„ì… (ìœ„ì—ì„œ ì•„ë˜ë¡œ ìŠ¬ë¼ì´ë“œ + í˜ì´ë“œ) */
@keyframes ranking-card-enter {
    0% {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
    }
    60% {
        opacity: 1;
        transform: translateY(5px) scale(1.02);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* ì¹´ë“œ í‡´ì¥ (ì•„ë˜ë¡œ ìŠ¬ë¼ì´ë“œ + í˜ì´ë“œ ì•„ì›ƒ) */
@keyframes ranking-card-leave {
    0% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
    100% {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
    }
}

/* ì¹´ë“œ ì§„ì… (ì¸¡ë©´ì—ì„œ) */
@keyframes ranking-card-enter-side {
    0% {
        opacity: 0;
        transform: translateX(-30px) scale(0.95);
    }
    100% {
        opacity: 1;
        transform: translateX(0) scale(1);
    }
}

/* [NEW] ì¹´ë“œ ë– ì˜¤ë¦„ (ë ˆì¸ ì´ë™ ì‹œì‘ ì‹œ) */
@keyframes ranking-card-lift {
    0% {
        transform: scale(1);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    100% {
        transform: scale(1.05) translateY(-10px);
        box-shadow: 0 20px 30px rgba(0, 0, 0, 0.2);
    }
}

/* =============================================
   Keyframes: Urgency Pulse
   ============================================= */

/* ê²½ê³  í„ìŠ¤ (5ë¶„ ì´ˆê³¼) - ë…¸ë€ìƒ‰ */
@keyframes ranking-pulse-warning {
    0%, 100% {
        box-shadow: 
            0 0 0 0 var(--ranking-pulse-warning-color),
            var(--shadow-sm);
    }
    50% {
        box-shadow: 
            0 0 0 8px rgba(234, 179, 8, 0),
            var(--shadow-md);
    }
}

/* ìœ„í—˜ í„ìŠ¤ (10ë¶„ ì´ˆê³¼) - ë¹¨ê°„ìƒ‰ */
@keyframes ranking-pulse-danger {
    0%, 100% {
        box-shadow: 
            0 0 0 0 var(--ranking-pulse-danger-color),
            var(--shadow-sm);
    }
    50% {
        box-shadow: 
            0 0 0 10px rgba(239, 68, 68, 0),
            var(--shadow-lg);
    }
}

/* ê¸´ê¸‰ í„ìŠ¤ (15ë¶„ ì´ˆê³¼) - ê°•í•œ ë¹¨ê°„ìƒ‰ + ë°°ê²½ ë³€í™” */
@keyframes ranking-pulse-critical {
    0%, 100% {
        box-shadow: 
            0 0 0 0 var(--ranking-pulse-critical-color),
            0 0 20px rgba(220, 38, 38, 0.2),
            var(--shadow-sm);
        border-color: var(--interactive-danger-normal);
    }
    50% {
        box-shadow: 
            0 0 0 12px rgba(220, 38, 38, 0),
            0 0 30px rgba(220, 38, 38, 0.3),
            var(--shadow-lg);
        border-color: var(--interactive-danger-hover);
    }
}

/* =============================================
   Keyframes: Loading & Effects
   ============================================= */

/* ë¡œë”© ì‹œë¨¸ íš¨ê³¼ */
@keyframes ranking-shimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

/* ì„ íƒ ê¸€ë¡œìš° íš¨ê³¼ */
@keyframes ranking-glow {
    0%, 100% {
        box-shadow: 
            0 0 0 2px var(--interactive-primary-normal),
            0 0 10px rgba(59, 130, 246, 0.3);
    }
    50% {
        box-shadow: 
            0 0 0 3px var(--interactive-primary-hover),
            0 0 15px rgba(59, 130, 246, 0.4);
    }
}

/* ìƒíƒœ ë³€ê²½ í•˜ì´ë¼ì´íŠ¸ */
@keyframes ranking-status-change {
    0% {
        transform: scale(1);
        filter: brightness(1);
    }
    30% {
        transform: scale(1.02);
        filter: brightness(1.1);
    }
    100% {
        transform: scale(1);
        filter: brightness(1);
    }
}

/* ë°€ë¦¼ íš¨ê³¼ ì• ë‹ˆë©”ì´ì…˜ */
@keyframes ranking-push-down {
    0% {
        transform: translateY(0);
    }
    100% {
        transform: translateY(var(--push-distance, 100px));
    }
}

/* ìˆœìœ„ ë³€ê²½ ì• ë‹ˆë©”ì´ì…˜ */
@keyframes ranking-rank-change {
    0% {
        transform: translateY(0);
        opacity: 1;
    }
    50% {
        opacity: 0.8;
    }
    100% {
        transform: translateY(var(--rank-distance, 0));
        opacity: 1;
    }
}

/* [NEW] ëª©í‘œ ë ˆì¸ í„ìŠ¤ */
@keyframes ranking-lane-target-pulse {
    0%, 100% {
        box-shadow: 
            0 0 0 2px var(--interactive-primary-normal),
            inset 0 0 20px rgba(56, 189, 248, 0.1);
    }
    50% {
        box-shadow: 
            0 0 0 3px var(--interactive-primary-hover),
            inset 0 0 30px rgba(56, 189, 248, 0.15);
    }
}

/* =============================================
   Animation Modifier Classes
   ============================================= */

/**
 * [MODIFIED v1.1.0] ì• ë‹ˆë©”ì´ì…˜ ì¤‘ ê¸°ë³¸ ìŠ¤íƒ€ì¼
 * - position: fixedë¡œ ë ˆì¸ ë°–ì—ì„œ ì• ë‹ˆë©”ì´ì…˜
 * - z-index: 100ìœ¼ë¡œ ë ˆì¸(z-index: 1) ìœ„ì— í‘œì‹œ
 * - ê°•í™”ëœ ê·¸ë¦¼ìë¡œ ì…ì²´ê° í‘œí˜„
 */
.equipment-card--animating {
    position: fixed !important;
    z-index: var(--z-index-card-animating) !important;
    pointer-events: none;
    will-change: transform, opacity;
    box-shadow: 
        var(--shadow-lg), 
        0 0 20px rgba(0, 0, 0, 0.3);
}

/* ì§„ì… ì• ë‹ˆë©”ì´ì…˜ */
.equipment-card--entering {
    animation: ranking-card-enter var(--ranking-duration-normal) var(--ranking-ease-bounce) forwards;
}

/* í‡´ì¥ ì• ë‹ˆë©”ì´ì…˜ */
.equipment-card--leaving {
    animation: ranking-card-leave var(--ranking-duration-fast) var(--ranking-ease-in) forwards;
}

/* ë°€ë¦¼ ì• ë‹ˆë©”ì´ì…˜ */
.equipment-card--pushed {
    transition: transform var(--ranking-duration-push) var(--ranking-ease-out);
    will-change: transform;
}

/**
 * [NEW v1.1.0] ì¹´ë“œ ë– ì˜¤ë¦„ ì• ë‹ˆë©”ì´ì…˜
 * ë ˆì¸ ì´ë™ Phase 1ì—ì„œ ì‚¬ìš©
 */
.equipment-card--lifting {
    animation: ranking-card-lift var(--ranking-duration-lift) ease-out forwards;
}

/**
 * [NEW v1.1.0] Ghost placeholder
 * ì›ë³¸ ì¹´ë“œ ìœ„ì¹˜ë¥¼ ìœ ì§€í•˜ë©´ì„œ ìˆ¨ê¹€
 * ì• ë‹ˆë©”ì´ì…˜ìš© ë³µì œë³¸ì´ ì´ë™í•˜ëŠ” ë™ì•ˆ ì‚¬ìš©
 */
.equipment-card--ghost {
    visibility: hidden;
    pointer-events: none;
}

/* =============================================
   Urgency Animation Classes
   ============================================= */

/* ê²½ê³  (5ë¶„ ì´ˆê³¼) */
.equipment-card--urgency-warning {
    animation: ranking-pulse-warning 2s ease-in-out infinite;
    border-color: var(--interactive-warning);
}

/* ìœ„í—˜ (10ë¶„ ì´ˆê³¼) */
.equipment-card--urgency-danger {
    animation: ranking-pulse-danger 1.5s ease-in-out infinite;
    border-color: var(--interactive-danger-normal);
}

/* ê¸´ê¸‰ (15ë¶„ ì´ˆê³¼) */
.equipment-card--urgency-critical {
    animation: ranking-pulse-critical 1s ease-in-out infinite;
    border-color: var(--interactive-danger-hover);
    background: linear-gradient(
        135deg,
        var(--surface-panel) 0%,
        rgba(220, 38, 38, 0.05) 100%
    );
}

/* =============================================
   Selection Animation
   ============================================= */

/* ì„ íƒëœ ì¹´ë“œ ê¸€ë¡œìš° */
.equipment-card--selected {
    animation: ranking-glow 2s ease-in-out infinite;
}

/* í¬ì»¤ìŠ¤ ìƒíƒœ */
.equipment-card:focus-visible {
    outline: none;
    animation: ranking-glow 1s ease-in-out infinite;
}

/* =============================================
   Status Change Animation
   ============================================= */

/* ìƒíƒœ ë³€ê²½ ì‹œ í•˜ì´ë¼ì´íŠ¸ */
.equipment-card--status-changed {
    animation: ranking-status-change var(--ranking-duration-slow) var(--ranking-ease-out);
}

/* =============================================
   Loading State
   ============================================= */

/* ë¡œë”© ì¤‘ì¸ ì¹´ë“œ */
.equipment-card--loading {
    background: linear-gradient(
        90deg,
        var(--surface-secondary) 25%,
        var(--surface-hover) 50%,
        var(--surface-secondary) 75%
    );
    background-size: 200% 100%;
    animation: ranking-shimmer 1.5s ease-in-out infinite;
}

/* ë¡œë”© ì¤‘ì¸ ì¹´ë“œ ë‚´ìš© ìˆ¨ê¹€ */
.equipment-card--loading > * {
    opacity: 0;
}

/* =============================================
   Lane Animations
   ============================================= */

/* ë ˆì¸ í•˜ì´ë¼ì´íŠ¸ (ë“œë˜ê·¸ ëŒ€ìƒ) */
@keyframes ranking-lane-highlight {
    0%, 100% {
        background: var(--surface-secondary);
    }
    50% {
        background: var(--surface-hover);
    }
}

.ranking-lane--highlight {
    animation: ranking-lane-highlight 1s ease-in-out infinite;
}

/**
 * [NEW v1.1.0] ëª©í‘œ ë ˆì¸ í•˜ì´ë¼ì´íŠ¸
 * ë ˆì¸ ì´ë™ ì‹œ ëª©í‘œ ë ˆì¸ì„ ê°•ì¡° í‘œì‹œ
 */
.ranking-lane--target {
    border-color: var(--interactive-primary-normal) !important;
    box-shadow: 
        0 0 0 2px var(--interactive-primary-normal),
        inset 0 0 20px rgba(56, 189, 248, 0.1);
    transition: 
        box-shadow var(--ranking-duration-fast) ease,
        border-color var(--ranking-duration-fast) ease;
}

/* ëª©í‘œ ë ˆì¸ í„ìŠ¤ íš¨ê³¼ (ì„ íƒì ) */
.ranking-lane--target-animated {
    animation: ranking-lane-target-pulse 1s ease-in-out infinite;
}

/* ë ˆì¸ ì—…ë°ì´íŠ¸ ì•Œë¦¼ */
@keyframes ranking-lane-update {
    0% {
        border-color: var(--border-default);
    }
    50% {
        border-color: var(--interactive-primary-normal);
    }
    100% {
        border-color: var(--border-default);
    }
}

.ranking-lane--updated {
    animation: ranking-lane-update 0.5s ease-out;
}

/* =============================================
   Counter Animations
   ============================================= */

/* ì¹´ìš´í„° ë³€ê²½ ì• ë‹ˆë©”ì´ì…˜ */
@keyframes ranking-counter-bump {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.2);
    }
    100% {
        transform: scale(1);
    }
}

.lane-header__count--changed {
    animation: ranking-counter-bump 0.3s var(--ranking-ease-bounce);
}

/* =============================================
   Duration Timer Animation
   ============================================= */

/* ì‹œê°„ ì—…ë°ì´íŠ¸ ê¹œë¹¡ì„ */
@keyframes ranking-time-tick {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.7;
    }
}

.equipment-card__duration--ticking {
    animation: ranking-time-tick 1s steps(2) infinite;
}

/* =============================================
   Progress Bar Animation
   ============================================= */

/* í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì¦ê°€ */
@keyframes ranking-progress-increase {
    0% {
        transform: scaleX(var(--progress-from, 0));
    }
    100% {
        transform: scaleX(var(--progress-to, 1));
    }
}

.equipment-card__production-bar-fill--animating {
    transform-origin: left center;
    animation: ranking-progress-increase 0.5s var(--ranking-ease-out) forwards;
}

/* =============================================
   Dark Theme Adjustments
   ============================================= */

[data-theme="dark"] {
    --ranking-pulse-warning-color: rgba(250, 204, 21, 0.3);
    --ranking-pulse-danger-color: rgba(248, 113, 113, 0.3);
    --ranking-pulse-critical-color: rgba(239, 68, 68, 0.4);
}

[data-theme="dark"] .equipment-card--urgency-critical {
    background: linear-gradient(
        135deg,
        var(--surface-panel) 0%,
        rgba(239, 68, 68, 0.1) 100%
    );
}

[data-theme="dark"] .equipment-card--selected {
    box-shadow: 
        0 0 0 2px var(--interactive-primary-normal),
        0 0 15px rgba(56, 189, 248, 0.4);
}

/* [NEW] Dark theme - animating card shadow */
[data-theme="dark"] .equipment-card--animating {
    box-shadow: 
        0 10px 15px rgba(0, 0, 0, 0.3),
        0 0 30px rgba(0, 0, 0, 0.4);
}

/* [NEW] Dark theme - target lane */
[data-theme="dark"] .ranking-lane--target {
    box-shadow: 
        0 0 0 2px var(--interactive-primary-normal),
        inset 0 0 25px rgba(56, 189, 248, 0.15);
}

/* =============================================
   Reduced Motion
   ============================================= */

@media (prefers-reduced-motion: reduce) {
    .equipment-card--entering,
    .equipment-card--leaving,
    .equipment-card--animating,
    .equipment-card--lifting,
    .equipment-card--urgency-warning,
    .equipment-card--urgency-danger,
    .equipment-card--urgency-critical,
    .equipment-card--selected,
    .equipment-card--status-changed,
    .equipment-card--loading,
    .ranking-lane--highlight,
    .ranking-lane--target,
    .ranking-lane--target-animated,
    .ranking-lane--updated,
    .lane-header__count--changed,
    .equipment-card__duration--ticking,
    .equipment-card__production-bar-fill--animating {
        animation: none !important;
        transition: none !important;
    }
    
    /* ëŒ€ì‹  ì •ì  ìŠ¤íƒ€ì¼ë¡œ ê¸´ê¸‰ë„ í‘œì‹œ */
    .equipment-card--urgency-warning {
        border-width: 2px;
        border-color: var(--interactive-warning);
    }
    
    .equipment-card--urgency-danger {
        border-width: 3px;
        border-color: var(--interactive-danger-normal);
    }
    
    .equipment-card--urgency-critical {
        border-width: 4px;
        border-color: var(--interactive-danger-hover);
    }
    
    /* ì •ì  ëª©í‘œ ë ˆì¸ í‘œì‹œ */
    .ranking-lane--target {
        border-width: 3px;
        border-color: var(--interactive-primary-normal);
    }
}

/* =============================================
   Performance Optimization
   ============================================= */

/* GPU ê°€ì†ì„ ìœ„í•œ will-change íŒíŠ¸ (í•„ìš”í•œ ê²½ìš°ë§Œ) */
.equipment-card--will-animate {
    will-change: transform, opacity;
}

/* ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ í›„ will-change ì œê±° */
.equipment-card--animation-complete {
    will-change: auto;
}

/* ë ˆì´ì–´ í”„ë¡œëª¨ì…˜ */
.equipment-card--elevated {
    transform: translateZ(0);
    backface-visibility: hidden;
}