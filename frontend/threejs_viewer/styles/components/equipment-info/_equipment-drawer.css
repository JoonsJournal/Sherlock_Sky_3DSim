/**
 * _equipment-drawer.css
 * =====================
 * Equipment Detail Drawer ì»´í¬ë„ŒíŠ¸
 * 
 * í”Œë¡œíŒ… íŒ¨ë„ì—ì„œ ì˜¤ë¥¸ìª½ ê³ ì • Drawerë¡œ ì „í™˜
 * Hybrid ì• ë‹ˆë©”ì´ì…˜: ì—´ë¦¼(widthâ†’transform), ë‹«í˜(transformâ†’width)
 * 
 * @version 1.0.0
 * @created 2026-01-16
 * 
 * [BEM êµ¬ì¡°]
 * .equipment-drawer              â†’ Block
 * .equipment-drawer__header      â†’ Element
 * .equipment-drawer__close-btn   â†’ Element
 * .equipment-drawer__tabs        â†’ Element
 * .equipment-drawer__tab         â†’ Element
 * .equipment-drawer__body        â†’ Element
 * .equipment-drawer__footer      â†’ Element
 * .equipment-drawer--open        â†’ Modifier (ì—´ë¦¼)
 * .equipment-drawer--opening     â†’ Modifier (ì—´ë¦¬ëŠ” ì¤‘)
 * .equipment-drawer--closing     â†’ Modifier (ë‹«íˆëŠ” ì¤‘)
 * .equipment-drawer--loading     â†’ Modifier (ë¡œë”©)
 * .equipment-drawer__tab--active â†’ Modifier (íƒ­ í™œì„±)
 * 
 * [ì˜ì¡´ì„±]
 * - tokens/_primitives.css (spacing, transitions, z-index)
 * - tokens/_semantic-light.css (surface-glass, glass-blur)
 * - tokens/_semantic-dark.css (dark mode support)
 * 
 * [í•˜ìœ„ í˜¸í™˜ì„±]
 * - #equipmentInfo ì„ íƒì drawer ëª¨ë“œ ì§€ì›
 * - .equipment-panel í´ë˜ìŠ¤ì™€ ë³‘í–‰ ì‚¬ìš© ê°€ëŠ¥
 * 
 * ğŸ“ ìœ„ì¹˜: frontend/threejs_viewer/styles/components/equipment-info/_equipment-drawer.css
 */

/* =============================================
   Drawer ì „ìš© CSS ë³€ìˆ˜ (ì‰¬ìš´ ì¡°ì •ìš©)
   :rootì— ì •ì˜í•˜ì—¬ ì–´ë””ì„œë“  ì ‘ê·¼ ê°€ëŠ¥
   ============================================= */
:root {
    /* Drawer í¬ê¸° - ì´ ê°’ë§Œ ë³€ê²½í•˜ë©´ ë„ˆë¹„ ì¡°ì • ê°€ëŠ¥ */
    --drawer-width: 380px;
    --drawer-min-width: 320px;
    --drawer-max-width: 500px;
    
    /* Drawer ì• ë‹ˆë©”ì´ì…˜ */
    --drawer-transition-duration: 0.3s;
    --drawer-transition-easing: cubic-bezier(0.4, 0, 0.2, 1);
}

/* =============================================
   Block: .equipment-drawer
   ============================================= */
.equipment-drawer {
    /* Position & Size */
    position: fixed;
    top: 0;
    right: 0;
    width: 0;
    height: 100vh;
    
    /* Layout */
    display: flex;
    flex-direction: column;
    overflow: hidden;
    
    /* Stacking */
    z-index: var(--z-modal, 1000);
    
    /* ğŸ¨ Glassmorphism íš¨ê³¼ (ê°€ì´ë“œë¼ì¸ ì¤€ìˆ˜) */
    background: var(--surface-glass, rgba(255, 255, 255, 0.85));
    backdrop-filter: blur(var(--glass-blur, 12px));
    -webkit-backdrop-filter: blur(var(--glass-blur, 12px));
    border-left: 1px solid var(--glass-border, rgba(255, 255, 255, 0.3));
    box-shadow: var(--glass-shadow, -4px 0 24px rgba(0, 0, 0, 0.15));
    
    /* Typography */
    color: var(--content-primary, #1a1a2e);
    font-family: var(--font-family-base, 'Inter', sans-serif);
}

/* =============================================
   Modifiers: ì• ë‹ˆë©”ì´ì…˜ ìƒíƒœ
   Hybrid ë°©ì‹ - JSì—ì„œ ìˆœì°¨ì  í´ë˜ìŠ¤ ì œì–´
   ============================================= */

/* 
 * ì—´ë¦¬ëŠ” ì¤‘ (Phase 1: width ì• ë‹ˆë©”ì´ì…˜)
 * - width: 0 â†’ drawer-width
 * - 3D ë·°ì–´ê°€ ìë™ìœ¼ë¡œ ì¤„ì–´ë“¦
 */
.equipment-drawer--opening {
    width: var(--drawer-width);
    transition: width var(--drawer-transition-duration) var(--drawer-transition-easing);
}

/* 
 * ì—´ë¦¼ ìƒíƒœ (ìµœì¢…)
 * - width ê³ ì •, transform ì´ˆê¸°í™”
 */
.equipment-drawer--open {
    width: var(--drawer-width);
    transform: translateX(0);
}

/* 
 * ë‹«íˆëŠ” ì¤‘ (Phase 1: transform ì• ë‹ˆë©”ì´ì…˜)
 * - transform: 0 â†’ 100% (ì˜¤ë¥¸ìª½ìœ¼ë¡œ ìŠ¬ë¼ì´ë“œ)
 */
.equipment-drawer--closing {
    width: var(--drawer-width); /* width ìœ ì§€í•˜ë©´ì„œ transform */
    transform: translateX(100%);
    transition: transform var(--drawer-transition-duration) var(--drawer-transition-easing);
}

/* 
 * ë¡œë”© ìƒíƒœ
 * - í´ë¦­ ë¹„í™œì„±í™”
 * - ì˜¤ë²„ë ˆì´ í‘œì‹œ
 */
.equipment-drawer--loading {
    pointer-events: none;
}

.equipment-drawer--loading::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--surface-glass, rgba(255, 255, 255, 0.7));
    backdrop-filter: blur(4px);
    z-index: 100;
}

.equipment-drawer--loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 32px;
    height: 32px;
    margin: -16px 0 0 -16px;
    border: 3px solid var(--border-default, #e0e0e0);
    border-top-color: var(--interactive-primary, #667eea);
    border-radius: 50%;
    z-index: 101;
    animation: drawer-spinner 0.8s linear infinite;
}

@keyframes drawer-spinner {
    to { transform: rotate(360deg); }
}

/* =============================================
   Element: Header
   ============================================= */
.equipment-drawer__header {
    /* Layout */
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-3, 12px);
    
    /* Size */
    padding: var(--spacing-4, 16px);
    padding-right: var(--spacing-12, 48px); /* Close button ê³µê°„ */
    min-height: 60px;
    flex-shrink: 0;
    
    /* Visual */
    background: var(--surface-panel-header, transparent);
    border-bottom: 1px solid var(--border-subtle, rgba(0, 0, 0, 0.08));
    
    /* Position for absolute close button */
    position: relative;
}

/* =============================================
   Element: Title (Header ë‚´ë¶€)
   ============================================= */
.equipment-drawer__title {
    margin: 0;
    padding: 0;
    
    /* Typography */
    color: var(--interactive-primary, #667eea);
    font-size: var(--font-size-lg, 18px);
    font-weight: var(--font-weight-semibold, 600);
    
    /* Overflow */
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Multi-select ëª¨ë“œ */
.equipment-drawer__title--multi-select {
    color: var(--status-info, #3b82f6);
}

/* =============================================
   Element: Close Button
   ============================================= */
.equipment-drawer__close-btn {
    /* Position */
    position: absolute;
    top: var(--spacing-4, 16px);
    right: var(--spacing-4, 16px);
    
    /* Size */
    width: 28px;
    height: 28px;
    
    /* Layout */
    display: flex;
    align-items: center;
    justify-content: center;
    
    /* Visual */
    background: var(--interactive-danger, #ef4444);
    color: var(--content-inverse, #ffffff);
    border: none;
    border-radius: var(--radius-full, 9999px);
    
    /* Typography */
    font-size: var(--font-size-lg, 18px);
    line-height: 1;
    
    /* Interaction */
    cursor: pointer;
    transition: all var(--transition-fast, 150ms) ease;
    z-index: 10;
}

.equipment-drawer__close-btn:hover {
    background: var(--interactive-danger-hover, #dc2626);
    transform: scale(1.1);
}

.equipment-drawer__close-btn:active {
    background: var(--interactive-danger-active, #b91c1c);
    transform: scale(1);
}

/* =============================================
   Element: Header Status Badge
   ============================================= */
.equipment-drawer__header-status {
    display: flex;
    align-items: center;
    gap: var(--spacing-1-5, 6px);
    padding: var(--spacing-1, 4px) var(--spacing-2-5, 10px);
    background: var(--surface-secondary, #f1f5f9);
    border-radius: var(--radius-full, 9999px);
    flex-shrink: 0;
}

.equipment-drawer__status-indicator {
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: var(--radius-full, 9999px);
}

.equipment-drawer__status-text {
    font-size: var(--font-size-sm, 13px);
    font-weight: var(--font-weight-semibold, 600);
    color: var(--content-primary, #1a1a2e);
}

/* Status Indicator Colors */
.equipment-drawer__status-indicator--running {
    background: var(--equip-running, #22c55e);
    box-shadow: var(--glow-success, 0 0 8px rgba(34, 197, 94, 0.5));
}

.equipment-drawer__status-indicator--idle {
    background: var(--equip-idle, #facc15);
}

.equipment-drawer__status-indicator--stop {
    background: var(--status-warning, #f59e0b);
}

.equipment-drawer__status-indicator--error {
    background: var(--equip-alarm, #ef4444);
    box-shadow: var(--glow-error, 0 0 8px rgba(239, 68, 68, 0.5));
    animation: drawer-status-blink 0.5s ease-in-out infinite;
}

.equipment-drawer__status-indicator--disconnected {
    background: var(--content-disabled, #9ca3af);
}

@keyframes drawer-status-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

/* =============================================
   Element: Tabs (Classic Folder Style)
   ============================================= */
.equipment-drawer__tabs {
    display: flex;
    padding: 0 var(--spacing-4, 16px);
    background: transparent;
    position: relative;
    margin-bottom: -1px;
    z-index: 1;
    flex-shrink: 0;
}

.equipment-drawer__tab {
    /* Position */
    position: relative;
    
    /* Size */
    padding: var(--spacing-2-5, 10px) var(--spacing-5, 20px);
    margin-right: var(--spacing-1, 4px);
    
    /* Visual - Inactive */
    background: var(--surface-secondary, #f1f5f9);
    border: 1px solid var(--border-default, #e2e8f0);
    border-bottom: 1px solid var(--border-default, #e2e8f0);
    border-radius: var(--radius-md, 6px) var(--radius-md, 6px) 0 0;
    
    /* Typography */
    color: var(--content-muted, #64748b);
    font-size: var(--font-size-sm, 13px);
    font-weight: var(--font-weight-medium, 500);
    font-family: var(--font-family-base, 'Inter', sans-serif);
    
    /* Interaction */
    cursor: pointer;
    transition: all var(--transition-fast, 150ms) ease;
    transform: translateY(2px);
}

.equipment-drawer__tab:hover {
    color: var(--content-primary, #1a1a2e);
    background: var(--surface-hover, #f8fafc);
}

/* Active Tab */
.equipment-drawer__tab--active {
    background: var(--surface-primary, #ffffff);
    color: var(--interactive-primary, #667eea);
    border-bottom-color: var(--surface-primary, #ffffff);
    font-weight: var(--font-weight-semibold, 600);
    transform: translateY(0);
    z-index: 2;
}

/* Active Tab Top Indicator */
.equipment-drawer__tab--active::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--interactive-primary, #667eea);
    border-radius: var(--radius-md, 6px) var(--radius-md, 6px) 0 0;
}

/* =============================================
   Element: Body (Scrollable Content)
   ============================================= */
.equipment-drawer__body {
    /* Layout */
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    
    /* Size */
    padding: var(--spacing-4, 16px);
    
    /* Visual */
    background: var(--surface-primary, #ffffff);
    border-top: 1px solid var(--border-default, #e2e8f0);
}

/* Tab Content Container */
.equipment-drawer__tab-content {
    display: none;
}

.equipment-drawer__tab-content--active {
    display: block;
    animation: drawer-tab-fade-in 0.2s ease-out;
}

@keyframes drawer-tab-fade-in {
    from {
        opacity: 0;
        transform: translateY(-5px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* =============================================
   Element: Footer (Optional)
   ============================================= */
.equipment-drawer__footer {
    /* Layout */
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: var(--spacing-2, 8px);
    
    /* Size */
    padding: var(--spacing-3, 12px) var(--spacing-4, 16px);
    flex-shrink: 0;
    
    /* Visual */
    background: var(--surface-secondary, #f1f5f9);
    border-top: 1px solid var(--border-subtle, rgba(0, 0, 0, 0.08));
}

/* =============================================
   Legacy Support: #equipmentInfo + .equipment-drawer
   ê¸°ì¡´ HTMLì˜ #equipmentInfoì— .equipment-drawer í´ë˜ìŠ¤ ì¶”ê°€ ì‹œ ë™ì‘
   ============================================= */
#equipmentInfo.equipment-drawer {
    /* ê¸°ì¡´ absolute â†’ fixedë¡œ ì˜¤ë²„ë¼ì´ë“œ */
    position: fixed;
    top: 0;
    right: 0;
    width: 0;
    height: 100vh;
    max-height: none;
    border-radius: 0;
    
    /* Drawer ìŠ¤íƒ€ì¼ ì ìš© */
    display: flex;
    flex-direction: column;
}

/* ê¸°ì¡´ .active í´ë˜ìŠ¤ ëŒ€ì‹  .equipment-drawer--open ì‚¬ìš© */
#equipmentInfo.equipment-drawer.equipment-drawer--open,
#equipmentInfo.equipment-drawer.equipment-drawer--opening {
    width: var(--drawer-width);
}

/* =============================================
   Dark Mode Support
   ============================================= */
[data-theme="dark"] .equipment-drawer {
    background: var(--surface-glass, rgba(15, 23, 42, 0.85));
    border-left-color: var(--glass-border, rgba(255, 255, 255, 0.1));
    box-shadow: var(--glass-shadow, -4px 0 24px rgba(0, 0, 0, 0.4));
}

[data-theme="dark"] .equipment-drawer__header {
    border-bottom-color: var(--border-subtle, rgba(255, 255, 255, 0.08));
}

[data-theme="dark"] .equipment-drawer__body {
    background: var(--surface-primary, #1e293b);
    border-top-color: var(--border-default, #334155);
}

[data-theme="dark"] .equipment-drawer__tab {
    background: var(--surface-secondary, #334155);
    border-color: var(--border-default, #475569);
    color: var(--content-muted, #94a3b8);
}

[data-theme="dark"] .equipment-drawer__tab:hover {
    background: var(--surface-hover, #3f4f63);
    color: var(--content-primary, #f1f5f9);
}

[data-theme="dark"] .equipment-drawer__tab--active {
    background: var(--surface-primary, #1e293b);
    color: var(--interactive-primary, #60a5fa);
    border-bottom-color: var(--surface-primary, #1e293b);
}

[data-theme="dark"] .equipment-drawer__footer {
    background: var(--surface-secondary, #334155);
    border-top-color: var(--border-subtle, rgba(255, 255, 255, 0.08));
}

/* =============================================
   Print Styles
   ============================================= */
@media print {
    .equipment-drawer {
        display: none !important;
    }
}