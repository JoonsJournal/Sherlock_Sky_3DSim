<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß™ Test: Cleanroom Sidebar (Standalone) v2.1</title>
    
    <style>
        /* =============================================
           TEST FRAMEWORK STYLES
           ============================================= */
        .test-framework {
            position: fixed;
            top: 10px;
            right: 10px;
            width: 420px;
            background: #1a1a2e;
            border: 1px solid #16213e;
            border-radius: 12px;
            padding: 16px;
            font-family: 'Consolas', monospace;
            font-size: 12px;
            color: #e5e5e5;
            z-index: 9999;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid #16213e;
        }
        
        .test-title {
            font-size: 14px;
            font-weight: bold;
            color: #06B6D4;
        }
        
        .test-tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 16px;
        }
        
        .test-tab {
            padding: 8px 12px;
            background: rgba(255,255,255,0.05);
            border: none;
            border-radius: 6px;
            color: #9CA3AF;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.2s;
        }
        
        .test-tab.active {
            background: linear-gradient(135deg, #06B6D4, #0891B2);
            color: white;
        }
        
        .test-tab:hover:not(.active) {
            background: rgba(255,255,255,0.1);
        }
        
        .test-panel {
            display: none;
        }
        
        .test-panel.active {
            display: block;
        }

        /* Icon Style Tester */
        .style-tester {
            margin-bottom: 16px;
        }
        
        .style-section {
            margin-bottom: 16px;
            padding: 12px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
        }
        
        .style-section h4 {
            color: #9CA3AF;
            font-size: 11px;
            text-transform: uppercase;
            margin-bottom: 12px;
            letter-spacing: 0.5px;
        }
        
        .style-row {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 8px;
        }
        
        .style-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            background: rgba(255,255,255,0.05);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }
        
        .style-option:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .style-option.selected {
            border-color: #06B6D4;
            background: rgba(6, 182, 212, 0.1);
        }
        
        .style-option svg {
            margin-bottom: 4px;
        }
        
        .style-label {
            font-size: 9px;
            color: #6B7280;
        }
        
        /* State Preview */
        .state-preview {
            display: flex;
            gap: 16px;
            padding: 16px;
            background: var(--bg-sidebar);
            border-radius: 8px;
            justify-content: center;
        }
        
        .state-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .state-item .icon-wrapper {
            width: 54px;
            height: 54px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            border-radius: 8px;
            transition: all 0.25s;
        }
        
        .state-item .icon-wrapper.normal {
            background: transparent;
        }
        
        .state-item .icon-wrapper.hover {
            background: rgba(255,255,255,0.05);
            transform: scale(1.1) translateY(-3px);
        }
        
        .state-item .icon-wrapper.hover svg {
            stroke: #FFFFFF;
            filter: drop-shadow(0 0 3px rgba(255, 255, 255, 0.3));
        }
        
        .state-item .icon-wrapper.selected {
            background: rgba(6, 182, 212, 0.1);
            transform: scale(1.08) translateY(-2px);
        }
        
        .state-item .icon-wrapper.selected svg {
            stroke: #06B6D4;
            filter: drop-shadow(0 0 6px #06B6D4);
        }
        
        .state-item .icon-wrapper.selected::before {
            content: '';
            position: absolute;
            left: -8px;
            width: 3px;
            height: 28px;
            background: #06B6D4;
            border-radius: 0 3px 3px 0;
            box-shadow: 0 0 6px #06B6D4;
        }
        
        .state-item .icon-wrapper.selected-hover {
            background: rgba(6, 182, 212, 0.15);
            transform: scale(1.12) translateY(-4px);
            animation: float 2s ease-in-out infinite;
        }
        
        .state-item .icon-wrapper.selected-hover svg {
            stroke: #06B6D4;
            filter: drop-shadow(0 0 10px #06B6D4);
        }
        
        .state-item .icon-wrapper.selected-hover::before {
            content: '';
            position: absolute;
            left: -8px;
            width: 3px;
            height: 28px;
            background: #06B6D4;
            border-radius: 0 3px 3px 0;
            box-shadow: 0 0 10px #06B6D4;
        }
        
        .state-item .icon-wrapper.disabled {
            opacity: 0.4;
        }
        
        .state-item .icon-wrapper.disabled svg {
            stroke: #334155;
        }
        
        .state-label {
            font-size: 10px;
            color: #6B7280;
            text-transform: uppercase;
        }
        
        /* Apply Button */
        .apply-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #06B6D4, #0891B2);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            margin-top: 12px;
            transition: all 0.2s;
        }
        
        .apply-btn:hover {
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.4);
        }
        
        /* Current Config Display */
        .current-config {
            padding: 12px;
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid rgba(6, 182, 212, 0.3);
            border-radius: 8px;
            margin-top: 12px;
        }
        
        .config-row {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            font-size: 11px;
        }
        
        .config-key { color: #9CA3AF; }
        .config-value { color: #06B6D4; font-weight: 600; }

        /* =============================================
           1. Theme Configuration (Cleanroom Palette)
           v2.1: Stroke 1px, Size 36px default
           ============================================= */
        :root {
            /* Background Colors */
            --bg-sidebar: #0F172A;
            --bg-main: #FFFFFF;
            
            /* Icon Colors */
            --icon-normal: #E2E8F0;
            --icon-selected: #06B6D4;
            --icon-disabled: #334155;
            
            /* Icon Sizing - v2.1 defaults */
            --icon-size: 36px;
            --icon-stroke-normal: 1px;
            --icon-stroke-hover: 1.5px;
            --icon-stroke-selected: 1.5px;
            
            /* Status Text Colors */
            --text-normal: #CBD5E1;
            --text-warning: #FBBF24;
            --text-alarm: #F87171;
            --text-success: #4ADE80;

            /* Interaction Settings */
            --transition-speed: 0.25s;
            
            /* Status Bar */
            --status-bar-height: 36px;
        }

        /* Reset & Layout */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            display: flex; 
            height: 100vh; 
            overflow: hidden; 
            font-family: 'Segoe UI', sans-serif;
            background: #1e293b;
        }
        
        /* =============================================
           2. Sidebar (Left)
           ============================================= */
        .sidebar {
            width: 80px;
            background-color: var(--bg-sidebar);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 24px;
            z-index: 10;
            box-shadow: 4px 0 15px rgba(0,0,0,0.25);
            transition: width 0.3s ease;
        }

        /* Icon Button Container */
        .icon-btn {
            width: 54px;
            height: 54px;
            margin-bottom: 12px;
            background: transparent;
            border: none;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            transition: transform var(--transition-speed) cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* SVG Style */
        .icon-btn svg {
            width: var(--icon-size);
            height: var(--icon-size);
            fill: none;
            stroke: var(--icon-normal);
            stroke-width: var(--icon-stroke-normal);
            stroke-linecap: round;
            stroke-linejoin: round;
            transition: all var(--transition-speed);
        }

        /* =============================================
           3. Interaction Logic (Hover & Selected)
           v2.1: Added floating effect for selected+hover
           ============================================= */
        
        /* Hover Effect (not selected) */
        .icon-btn:not(.selected):not(.disabled):hover {
            transform: scale(1.1) translateY(-3px);
        }
        .icon-btn:not(.selected):not(.disabled):hover svg {
            stroke: #FFFFFF;
            stroke-width: var(--icon-stroke-hover);
            filter: drop-shadow(0 0 3px rgba(255, 255, 255, 0.3));
        }

        /* Selected Effect */
        .icon-btn.selected {
            transform: scale(1.08) translateY(-2px);
        }
        .icon-btn.selected svg {
            stroke: var(--icon-selected);
            stroke-width: var(--icon-stroke-selected);
            filter: drop-shadow(0 0 6px var(--icon-selected));
        }

        /* ‚ú® Selected + Hover = Floating Effect */
        @keyframes float {
            0%, 100% { transform: scale(1.12) translateY(-4px); }
            50% { transform: scale(1.12) translateY(-8px); }
        }
        
        .icon-btn.selected:hover {
            animation: float 2s ease-in-out infinite;
        }
        .icon-btn.selected:hover svg {
            stroke: var(--icon-selected);
            stroke-width: var(--icon-stroke-selected);
            filter: drop-shadow(0 0 12px var(--icon-selected));
        }

        /* Indicator Line for Selected Item */
        .icon-btn.selected::before {
            content: '';
            position: absolute;
            left: -13px;
            width: 3px;
            height: 28px;
            background-color: var(--icon-selected);
            border-radius: 0 3px 3px 0;
            box-shadow: 0 0 6px var(--icon-selected);
        }

        /* Disabled State */
        .icon-btn.disabled {
            cursor: not-allowed;
            opacity: 0.4;
            pointer-events: none;
        }
        .icon-btn.disabled svg {
            stroke: var(--icon-disabled);
        }
        .icon-btn.disabled:hover {
            transform: none;
            animation: none;
        }

        /* =============================================
           4. Submenu System
           ============================================= */
        .has-submenu {
            position: relative;
        }
        
        .submenu {
            position: absolute;
            left: 70px;
            top: 0;
            background: var(--bg-sidebar);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 8px 0;
            min-width: 160px;
            opacity: 0;
            visibility: hidden;
            transform: translateX(-10px);
            transition: all 0.2s ease;
            box-shadow: 4px 4px 20px rgba(0,0,0,0.4);
            z-index: 100;
        }
        
        .has-submenu:hover .submenu,
        .has-submenu.submenu-open .submenu {
            opacity: 1;
            visibility: visible;
            transform: translateX(0);
        }
        
        .submenu-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 16px;
            color: var(--text-normal);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.15s;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
        }
        
        .submenu-item:hover {
            background: rgba(6, 182, 212, 0.1);
            color: #FFFFFF;
        }
        
        .submenu-item.active {
            background: rgba(6, 182, 212, 0.15);
            color: var(--icon-selected);
        }
        
        .submenu-item svg {
            width: 18px;
            height: 18px;
            stroke: currentColor;
            stroke-width: 1.5px;
            fill: none;
        }
        
        .submenu-divider {
            height: 1px;
            background: rgba(255,255,255,0.1);
            margin: 6px 12px;
        }
        
        .submenu-header {
            padding: 6px 16px;
            font-size: 10px;
            color: #6B7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* Submenu indicator arrow */
        .has-submenu::after {
            content: '';
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            border: 4px solid transparent;
            border-left-color: var(--icon-normal);
            opacity: 0.5;
        }
        
        .has-submenu:hover::after,
        .has-submenu.selected::after {
            border-left-color: var(--icon-selected);
            opacity: 1;
        }

        /* =============================================
           5. Main Content Area
           ============================================= */
        .main-content {
            flex-grow: 1;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #e5e5e5;
            margin-bottom: var(--status-bar-height);
        }

        .main-content h1 {
            font-size: 32px;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #06B6D4, #8B5CF6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .main-content p {
            color: #9CA3AF;
        }

        /* Current Mode Display */
        .current-mode {
            margin-top: 40px;
            padding: 20px 40px;
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid rgba(6, 182, 212, 0.3);
            border-radius: 12px;
            text-align: center;
        }

        .mode-label {
            font-size: 12px;
            color: #9CA3AF;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .mode-value {
            font-size: 24px;
            font-weight: bold;
            color: #06B6D4;
        }
        
        .submode-value {
            font-size: 14px;
            color: #9CA3AF;
            margin-top: 4px;
        }

        /* =============================================
           6. Status Bar (Bottom) - Compact Height
           v2.1: Reduced height to 36px
           ============================================= */
        .status-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: var(--status-bar-height);
            background-color: var(--bg-sidebar);
            border-top: 1px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            box-sizing: border-box;
            font-family: 'Consolas', monospace;
            font-size: 11px;
            z-index: 20;
        }

        .status-group { 
            display: flex; 
            gap: 16px;
            align-items: center;
        }
        
        .status-item { 
            display: flex; 
            align-items: center; 
            gap: 6px;
            padding: 4px 10px;
            background: rgba(255,255,255,0.03);
            border-radius: 4px;
        }
        
        .status-normal { color: var(--text-normal); }
        .status-success { color: var(--text-success); }
        .status-warning { color: var(--text-warning); font-weight: 600; }
        .status-alarm { 
            color: var(--text-alarm); 
            font-weight: 700; 
            animation: pulse-alarm 1.5s infinite; 
        }

        .status-dot { 
            width: 6px; 
            height: 6px; 
            border-radius: 50%; 
            background-color: currentColor;
            flex-shrink: 0;
        }
        
        .status-dot.connected {
            background-color: var(--text-success);
            box-shadow: 0 0 4px var(--text-success);
        }
        
        .status-dot.disconnected {
            background-color: var(--text-alarm);
            box-shadow: 0 0 4px var(--text-alarm);
        }
        
        .status-dot.warning {
            background-color: var(--text-warning);
            box-shadow: 0 0 4px var(--text-warning);
        }

        .status-label {
            color: #6B7280;
            font-size: 9px;
            text-transform: uppercase;
        }
        
        .status-value {
            color: var(--text-normal);
            font-weight: 500;
            font-size: 11px;
        }
        
        /* Performance Bar - Compact */
        .perf-bar {
            width: 50px;
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .perf-bar-fill {
            height: 100%;
            border-radius: 2px;
            transition: width 0.3s, background 0.3s;
        }
        
        .perf-bar-fill.good { background: var(--text-success); }
        .perf-bar-fill.medium { background: var(--text-warning); }
        .perf-bar-fill.bad { background: var(--text-alarm); }

        @keyframes pulse-alarm {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        /* Tooltip */
        .icon-btn[data-tooltip]::after {
            content: attr(data-tooltip);
            position: absolute;
            left: 70px;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s, transform 0.2s;
            transform: translateX(-10px);
            z-index: 50;
        }

        .icon-btn:not(.has-submenu):hover[data-tooltip]::after {
            opacity: 1;
            transform: translateX(0);
        }

        /* Divider */
        .sidebar-divider {
            width: 40px;
            height: 1px;
            background: rgba(255,255,255,0.1);
            margin: 8px 0;
        }

        /* Spacer */
        .sidebar-spacer {
            flex-grow: 1;
        }
        
        /* =============================================
           7. Test Controls Additional Styles
           ============================================= */
        .slider-container {
            margin: 8px 0;
        }
        
        .slider-container label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
            font-size: 11px;
            color: #9CA3AF;
        }
        
        .slider-container input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255,255,255,0.1);
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #06B6D4;
            cursor: pointer;
        }
        
        .test-log {
            margin-top: 12px;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 6px;
            font-size: 10px;
            max-height: 100px;
            overflow-y: auto;
        }
        
        .log-entry {
            padding: 2px 0;
            color: #6B7280;
        }
        
        .log-entry.success { color: #4ADE80; }
        .log-entry.error { color: #F87171; }
        .log-entry.info { color: #06B6D4; }
    </style>
</head>
<body>

    <!-- =============================================
         SIDEBAR COMPONENT
         Icon Order: Connection, Monitoring, Analysis, Simulation
         ============================================= -->
    <aside class="sidebar" id="sidebar">
        
        <!-- 1. Connection Button -->
        <button class="icon-btn selected" id="btn-connection" data-mode="connection" data-tooltip="Connection Setup (Ctrl+K)">
            <svg viewBox="0 0 24 24">
                <path d="M4 6c0 1.66 3.58 3 8 3s8-1.34 8-3"/>
                <path d="M20 6v6c0 1.66-3.58 3-8 3s-8-1.34-8-3V6"/>
                <ellipse cx="12" cy="6" rx="8" ry="3"/>
                <circle cx="19" cy="19" r="3"/>
                <path d="M19 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" fill="currentColor" stroke="none"/>
            </svg>
        </button>

        <!-- 2. Monitoring Button with Submenu -->
        <div class="has-submenu" id="btn-monitoring-wrapper">
            <button class="icon-btn" id="btn-monitoring" data-mode="monitoring" data-tooltip="System Monitoring (M)">
                <svg viewBox="0 0 24 24">
                    <rect x="3" y="4" width="18" height="12" rx="2" />
                    <polyline points="6 10 9 10 11 7 13 13 15 10 18 10" />
                    <path d="M12 16v4" />
                    <path d="M8 20h8" />
                </svg>
            </button>
            
            <!-- Submenu -->
            <div class="submenu" id="monitoring-submenu">
                <div class="submenu-header">Monitoring Views</div>
                <button class="submenu-item active" data-submode="3d-view" onclick="setSubMode('monitoring', '3d-view')">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                        <path d="M2 17l10 5 10-5"/>
                        <path d="M2 12l10 5 10-5"/>
                    </svg>
                    3D View
                </button>
                <button class="submenu-item" data-submode="ranking-view" onclick="setSubMode('monitoring', 'ranking-view')">
                    <svg viewBox="0 0 24 24">
                        <path d="M18 20V10"/>
                        <path d="M12 20V4"/>
                        <path d="M6 20v-6"/>
                    </svg>
                    Ranking View
                </button>
            </div>
        </div>

        <!-- 3. Analysis Button -->
        <button class="icon-btn" id="btn-analysis" data-mode="analysis" data-tooltip="Data Analysis (A)">
            <svg viewBox="0 0 24 24">
                <path d="M21 21H4.6c-.6 0-1.1-.5-1.1-1.1V3"/>
                <path d="M7 14l4-4 4 4 6-6"/>
                <circle cx="21" cy="8" r="2"/>
            </svg>
        </button>

        <!-- 4. Simulation Button -->
        <button class="icon-btn" id="btn-simulation" data-mode="simulation" data-tooltip="Simulation (S)">
            <svg viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="3"/>
                <path d="M12 2v4"/>
                <path d="M12 18v4"/>
                <path d="M4.93 4.93l2.83 2.83"/>
                <path d="M16.24 16.24l2.83 2.83"/>
                <path d="M2 12h4"/>
                <path d="M18 12h4"/>
                <path d="M4.93 19.07l2.83-2.83"/>
                <path d="M16.24 7.76l2.83-2.83"/>
            </svg>
        </button>

        <div class="sidebar-divider"></div>

        <!-- Layout Button -->
        <button class="icon-btn" id="btn-layout" data-mode="layout" data-tooltip="Layout Editor">
            <svg viewBox="0 0 24 24">
                <rect x="3" y="3" width="7" height="7"/>
                <rect x="14" y="3" width="7" height="7"/>
                <rect x="14" y="14" width="7" height="7"/>
                <rect x="3" y="14" width="7" height="7"/>
            </svg>
        </button>

        <!-- Settings Button -->
        <button class="icon-btn" id="btn-settings" data-mode="settings" data-tooltip="Settings">
            <svg viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="3"/>
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
            </svg>
        </button>

        <div class="sidebar-spacer"></div>
        
        <!-- Debug Button - Disabled when Monitoring is selected -->
        <button class="icon-btn" id="btn-debug" data-mode="debug" data-tooltip="Debug Panel (D)">
            <svg viewBox="0 0 24 24">
                <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
            </svg>
        </button>

        <div style="height: 50px;"></div>
    </aside>

    <!-- =============================================
         MAIN CONTENT AREA
         ============================================= -->
    <main class="main-content">
        <h1>üß™ Sidebar Test v2.1</h1>
        <p>ÏïÑÏù¥ÏΩò ÏàúÏÑú: Connection ‚Üí Monitoring ‚Üí Analysis ‚Üí Simulation</p>
        
        <div class="current-mode">
            <div class="mode-label">Current Mode</div>
            <div class="mode-value" id="current-mode">Connection</div>
            <div class="submode-value" id="current-submode"></div>
        </div>
    </main>

    <!-- =============================================
         STATUS BAR - Compact (36px height)
         ============================================= -->
    <footer class="status-bar">
        <!-- Left Group: Connections -->
        <div class="status-group">
            <!-- Backend Connection -->
            <div class="status-item" id="status-backend">
                <span class="status-dot connected" id="backend-dot"></span>
                <span class="status-label">Backend</span>
                <span class="status-value" id="backend-value">Connected</span>
            </div>
            
            <!-- DB Connection -->
            <div class="status-item" id="status-db">
                <span class="status-dot connected" id="db-dot"></span>
                <span class="status-label">DB</span>
                <span class="status-value" id="db-value">kr-b-01</span>
            </div>
        </div>

        <!-- Center Group: Performance -->
        <div class="status-group">
            <!-- Render Performance -->
            <div class="status-item" id="status-render">
                <span class="status-label">FPS</span>
                <span class="status-value" id="fps-value">60</span>
                <div class="perf-bar">
                    <div class="perf-bar-fill good" id="fps-bar" style="width: 100%;"></div>
                </div>
            </div>
            
            <!-- Memory Usage -->
            <div class="status-item" id="status-memory">
                <span class="status-label">MEM</span>
                <span class="status-value"><span id="memory-value">128</span>MB</span>
                <div class="perf-bar">
                    <div class="perf-bar-fill good" id="memory-bar" style="width: 30%;"></div>
                </div>
            </div>
        </div>

        <!-- Right Group: User Info -->
        <div class="status-group">
            <div class="status-item">
                <span class="status-label">User</span>
                <span class="status-value">Admin</span>
            </div>
        </div>
    </footer>

    <!-- =============================================
         TEST FRAMEWORK PANEL
         ============================================= -->
    <div class="test-framework" id="test-panel">
        <div class="test-header">
            <div class="test-title">üß™ Icon Style Tester v2.1</div>
        </div>
        
        <!-- Tabs -->
        <div class="test-tabs">
            <button class="test-tab active" onclick="showPanel('style')">Icon Styles</button>
            <button class="test-tab" onclick="showPanel('status')">Status Bar</button>
            <button class="test-tab" onclick="showPanel('tests')">Tests</button>
        </div>
        
        <!-- Panel 1: Icon Styles -->
        <div class="test-panel active" id="panel-style">
            <div class="style-tester">
                <!-- Stroke Width Selection -->
                <div class="style-section">
                    <h4>Stroke Width (ÏÑ† ÍµµÍ∏∞)</h4>
                    <div class="style-row" id="stroke-options">
                        <!-- Generated by JS -->
                    </div>
                </div>
                
                <!-- Icon Size Selection -->
                <div class="style-section">
                    <h4>Icon Size (ÏïÑÏù¥ÏΩò ÌÅ¨Í∏∞)</h4>
                    <div class="style-row" id="size-options">
                        <!-- Generated by JS -->
                    </div>
                </div>
                
                <!-- State Preview -->
                <div class="style-section">
                    <h4>State Preview (ÏÉÅÌÉú ÎØ∏Î¶¨Î≥¥Í∏∞)</h4>
                    <div class="state-preview" id="state-preview">
                        <!-- Generated by JS -->
                    </div>
                </div>
                
                <!-- Current Config -->
                <div class="current-config">
                    <div class="config-row">
                        <span class="config-key">Icon Size:</span>
                        <span class="config-value" id="config-size">36px</span>
                    </div>
                    <div class="config-row">
                        <span class="config-key">Stroke Normal:</span>
                        <span class="config-value" id="config-stroke-normal">1px</span>
                    </div>
                    <div class="config-row">
                        <span class="config-key">Stroke Hover:</span>
                        <span class="config-value" id="config-stroke-hover">1.5px</span>
                    </div>
                    <div class="config-row">
                        <span class="config-key">Stroke Selected:</span>
                        <span class="config-value" id="config-stroke-selected">1.5px</span>
                    </div>
                </div>
                
                <button class="apply-btn" onclick="applyStyles()">‚úì Apply to Sidebar</button>
            </div>
        </div>
        
        <!-- Panel 2: Status Bar Controls -->
        <div class="test-panel" id="panel-status">
            <div class="style-section">
                <h4>Backend Connection</h4>
                <div class="style-row">
                    <button class="style-option" onclick="setBackendStatus('connected')">‚úì Connected</button>
                    <button class="style-option" onclick="setBackendStatus('disconnected')">‚úó Disconnected</button>
                    <button class="style-option" onclick="setBackendStatus('connecting')">‚ü≥ Connecting</button>
                </div>
            </div>
            
            <div class="style-section">
                <h4>Database Connection</h4>
                <div class="style-row">
                    <button class="style-option" onclick="setDBStatus('connected', 'kr-b-01')">kr-b-01</button>
                    <button class="style-option" onclick="setDBStatus('connected', 'vn-a-02')">vn-a-02</button>
                    <button class="style-option" onclick="setDBStatus('disconnected', 'None')">Disconnected</button>
                </div>
            </div>
            
            <div class="style-section">
                <h4>Render Performance</h4>
                <div class="slider-container">
                    <label>
                        <span>FPS</span>
                        <span id="fps-display">60</span>
                    </label>
                    <input type="range" min="1" max="120" value="60" oninput="setFPS(this.value)">
                </div>
                <div class="slider-container">
                    <label>
                        <span>Memory (MB)</span>
                        <span id="memory-display">128</span>
                    </label>
                    <input type="range" min="50" max="2000" value="128" oninput="setMemory(this.value)">
                </div>
            </div>
        </div>
        
        <!-- Panel 3: Automated Tests -->
        <div class="test-panel" id="panel-tests">
            <div class="style-section">
                <h4>Visual Tests</h4>
                <div id="test-results">
                    <!-- Generated by test runner -->
                </div>
                <button class="apply-btn" onclick="runAllTests()" style="margin-top: 12px;">‚ñ∂ Run All Tests</button>
            </div>
            
            <div class="test-log" id="test-log">
                <div class="log-entry info">Ready to run tests...</div>
            </div>
        </div>
    </div>

    <!-- =============================================
         SCRIPTS
         ============================================= -->
    <script>
        // =============================================
        // Configuration - v2.1 defaults
        // =============================================
        const CONFIG = {
            strokeWidths: [1, 1.5, 2, 2.5, 3],
            iconSizes: [24, 28, 32, 36, 40],
            currentStroke: 1,        // v2.1: default 1px
            currentSize: 36,         // v2.1: default 36px
            strokeHover: 1.5,
            strokeSelected: 1.5
        };
        
        let currentMode = 'connection';
        let currentSubMode = null;

        // =============================================
        // Initialize
        // =============================================
        function init() {
            generateStrokeOptions();
            generateSizeOptions();
            generateStatePreview();
            setupSidebarEvents();
            startPerformanceSimulation();
            updateConfigDisplay();
            applyStyles(); // Apply default styles on load
        }

        // =============================================
        // Panel Management
        // =============================================
        function showPanel(panelName) {
            document.querySelectorAll('.test-panel').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.test-tab').forEach(t => t.classList.remove('active'));
            
            document.getElementById(`panel-${panelName}`).classList.add('active');
            event.target.classList.add('active');
        }

        // =============================================
        // Stroke Width Options
        // =============================================
        function generateStrokeOptions() {
            const container = document.getElementById('stroke-options');
            container.innerHTML = '';
            
            CONFIG.strokeWidths.forEach(width => {
                const option = document.createElement('div');
                option.className = `style-option${width === CONFIG.currentStroke ? ' selected' : ''}`;
                option.onclick = () => selectStroke(width);
                
                option.innerHTML = `
                    <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="#E2E8F0" stroke-width="${width}">
                        <rect x="3" y="4" width="18" height="12" rx="2"/>
                        <polyline points="6 10 9 10 11 7 13 13 15 10 18 10"/>
                    </svg>
                    <span class="style-label">${width}px</span>
                `;
                
                container.appendChild(option);
            });
        }

        function selectStroke(width) {
            CONFIG.currentStroke = width;
            CONFIG.strokeHover = Math.min(width + 0.5, 3);
            CONFIG.strokeSelected = Math.min(width + 0.5, 3);
            
            generateStrokeOptions();
            generateStatePreview();
            updateConfigDisplay();
        }

        // =============================================
        // Icon Size Options
        // =============================================
        function generateSizeOptions() {
            const container = document.getElementById('size-options');
            container.innerHTML = '';
            
            CONFIG.iconSizes.forEach(size => {
                const option = document.createElement('div');
                option.className = `style-option${size === CONFIG.currentSize ? ' selected' : ''}`;
                option.onclick = () => selectSize(size);
                
                option.innerHTML = `
                    <svg viewBox="0 0 24 24" width="${size}" height="${size}" fill="none" stroke="#E2E8F0" stroke-width="${CONFIG.currentStroke}">
                        <rect x="3" y="4" width="18" height="12" rx="2"/>
                        <polyline points="6 10 9 10 11 7 13 13 15 10 18 10"/>
                    </svg>
                    <span class="style-label">${size}px</span>
                `;
                
                container.appendChild(option);
            });
        }

        function selectSize(size) {
            CONFIG.currentSize = size;
            generateSizeOptions();
            generateStatePreview();
            updateConfigDisplay();
        }

        // =============================================
        // State Preview - v2.1: Added Selected+Hover
        // =============================================
        function generateStatePreview() {
            const container = document.getElementById('state-preview');
            const states = ['normal', 'hover', 'selected', 'selected-hover', 'disabled'];
            
            container.innerHTML = states.map(state => {
                const strokeWidth = (state === 'hover' || state === 'selected-hover') ? CONFIG.strokeHover : 
                                   state === 'selected' ? CONFIG.strokeSelected : 
                                   CONFIG.currentStroke;
                const color = state === 'disabled' ? '#334155' :
                             (state === 'selected' || state === 'selected-hover') ? '#06B6D4' :
                             state === 'hover' ? '#FFFFFF' : '#E2E8F0';
                
                const label = state === 'selected-hover' ? 'sel+hover' : state;
                
                return `
                    <div class="state-item">
                        <div class="icon-wrapper ${state}">
                            <svg viewBox="0 0 24 24" width="${CONFIG.currentSize}" height="${CONFIG.currentSize}" 
                                 fill="none" stroke="${color}" stroke-width="${strokeWidth}"
                                 stroke-linecap="round" stroke-linejoin="round">
                                <rect x="3" y="4" width="18" height="12" rx="2"/>
                                <polyline points="6 10 9 10 11 7 13 13 15 10 18 10"/>
                                <path d="M12 16v4"/>
                                <path d="M8 20h8"/>
                            </svg>
                        </div>
                        <span class="state-label">${label}</span>
                    </div>
                `;
            }).join('');
        }

        // =============================================
        // Apply Styles to Sidebar
        // =============================================
        function applyStyles() {
            document.documentElement.style.setProperty('--icon-size', `${CONFIG.currentSize}px`);
            document.documentElement.style.setProperty('--icon-stroke-normal', `${CONFIG.currentStroke}px`);
            document.documentElement.style.setProperty('--icon-stroke-hover', `${CONFIG.strokeHover}px`);
            document.documentElement.style.setProperty('--icon-stroke-selected', `${CONFIG.strokeSelected}px`);
            
            log(`Applied: Size=${CONFIG.currentSize}px, Stroke=${CONFIG.currentStroke}px`, 'success');
        }

        function updateConfigDisplay() {
            document.getElementById('config-size').textContent = `${CONFIG.currentSize}px`;
            document.getElementById('config-stroke-normal').textContent = `${CONFIG.currentStroke}px`;
            document.getElementById('config-stroke-hover').textContent = `${CONFIG.strokeHover}px`;
            document.getElementById('config-stroke-selected').textContent = `${CONFIG.strokeSelected}px`;
        }

        // =============================================
        // Sidebar Events
        // =============================================
        function setupSidebarEvents() {
            const buttons = document.querySelectorAll('.icon-btn');
            
            buttons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    if (this.classList.contains('disabled')) return;
                    if (this.closest('.has-submenu')) return;
                    
                    buttons.forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    const mode = this.dataset.mode;
                    setMode(mode);
                });
            });
            
            // Monitoring button special handling
            const monitoringBtn = document.getElementById('btn-monitoring');
            monitoringBtn.addEventListener('click', function() {
                const buttons = document.querySelectorAll('.icon-btn');
                buttons.forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                setMode('monitoring');
            });
        }

        function setMode(mode) {
            currentMode = mode;
            currentSubMode = null;
            document.getElementById('current-mode').textContent = 
                mode.charAt(0).toUpperCase() + mode.slice(1);
            document.getElementById('current-submode').textContent = '';
            
            // v2.1: Disable Debug button when Monitoring is selected
            const debugBtn = document.getElementById('btn-debug');
            if (mode === 'monitoring') {
                debugBtn.classList.add('disabled');
                log('Debug Panel disabled (Monitoring mode)', 'info');
            } else {
                debugBtn.classList.remove('disabled');
            }
            
            log(`Mode: ${mode}`, 'info');
        }

        function setSubMode(mode, submode) {
            currentMode = mode;
            currentSubMode = submode;
            
            // Update main button
            const buttons = document.querySelectorAll('.icon-btn');
            buttons.forEach(b => b.classList.remove('selected'));
            document.getElementById('btn-monitoring').classList.add('selected');
            
            // Update submenu items
            document.querySelectorAll('.submenu-item').forEach(item => {
                item.classList.toggle('active', item.dataset.submode === submode);
            });
            
            // Update display
            document.getElementById('current-mode').textContent = 'Monitoring';
            const submodeLabels = {
                '3d-view': '3D View',
                'ranking-view': 'Ranking View'
            };
            document.getElementById('current-submode').textContent = `‚Üí ${submodeLabels[submode] || submode}`;
            
            // Disable Debug button
            document.getElementById('btn-debug').classList.add('disabled');
            
            log(`Mode: ${mode} ‚Üí ${submode}`, 'info');
        }

        // =============================================
        // Status Bar Controls
        // =============================================
        function setBackendStatus(status) {
            const dot = document.getElementById('backend-dot');
            const value = document.getElementById('backend-value');
            
            dot.className = 'status-dot';
            
            switch(status) {
                case 'connected':
                    dot.classList.add('connected');
                    value.textContent = 'Connected';
                    break;
                case 'disconnected':
                    dot.classList.add('disconnected');
                    value.textContent = 'Disconnected';
                    break;
                case 'connecting':
                    dot.classList.add('warning');
                    value.textContent = 'Connecting...';
                    break;
            }
            
            log(`Backend: ${status}`, status === 'connected' ? 'success' : 'error');
        }

        function setDBStatus(status, name) {
            const dot = document.getElementById('db-dot');
            const value = document.getElementById('db-value');
            
            dot.className = 'status-dot';
            dot.classList.add(status === 'connected' ? 'connected' : 'disconnected');
            value.textContent = name;
            
            log(`Database: ${name} (${status})`, status === 'connected' ? 'success' : 'error');
        }

        function setFPS(fps) {
            fps = parseInt(fps);
            document.getElementById('fps-value').textContent = fps;
            document.getElementById('fps-display').textContent = fps;
            
            const bar = document.getElementById('fps-bar');
            const percent = Math.min(100, (fps / 60) * 100);
            bar.style.width = `${percent}%`;
            
            bar.className = 'perf-bar-fill';
            if (fps >= 50) bar.classList.add('good');
            else if (fps >= 30) bar.classList.add('medium');
            else bar.classList.add('bad');
        }

        function setMemory(mb) {
            mb = parseInt(mb);
            document.getElementById('memory-value').textContent = mb;
            document.getElementById('memory-display').textContent = mb;
            
            const bar = document.getElementById('memory-bar');
            const percent = Math.min(100, (mb / 1000) * 100);
            bar.style.width = `${percent}%`;
            
            bar.className = 'perf-bar-fill';
            if (mb < 500) bar.classList.add('good');
            else if (mb < 1000) bar.classList.add('medium');
            else bar.classList.add('bad');
        }

        // =============================================
        // Performance Simulation
        // =============================================
        function startPerformanceSimulation() {
            setInterval(() => {
                // Simulate FPS fluctuation
                const baseFPS = 58;
                const fps = baseFPS + Math.floor(Math.random() * 5);
                setFPS(fps);
                
                // Simulate memory usage
                const currentMem = parseInt(document.getElementById('memory-value').textContent);
                const newMem = Math.max(100, Math.min(300, currentMem + (Math.random() - 0.5) * 20));
                setMemory(Math.floor(newMem));
            }, 2000);
        }

        // =============================================
        // Test Runner
        // =============================================
        const tests = [
            { name: 'Sidebar renders', fn: () => document.getElementById('sidebar').offsetWidth > 0 },
            { name: 'Icon order correct (4 main)', fn: () => {
                const ids = ['btn-connection', 'btn-monitoring', 'btn-analysis', 'btn-simulation'];
                return ids.every(id => document.getElementById(id) !== null);
            }},
            { name: 'Status bar height = 36px', fn: () => {
                const bar = document.querySelector('.status-bar');
                return bar.offsetHeight <= 40;
            }},
            { name: 'Submenu exists', fn: () => document.querySelector('.submenu') !== null },
            { name: 'Debug disabled when Monitoring', fn: () => {
                setMode('monitoring');
                return document.getElementById('btn-debug').classList.contains('disabled');
            }},
            { name: 'Default stroke = 1px', fn: () => CONFIG.currentStroke === 1 },
            { name: 'Default size = 36px', fn: () => CONFIG.currentSize === 36 },
        ];

        function runAllTests() {
            const container = document.getElementById('test-results');
            container.innerHTML = '';
            
            let passed = 0;
            let failed = 0;
            
            tests.forEach(test => {
                try {
                    const result = test.fn();
                    const status = result ? 'pass' : 'fail';
                    result ? passed++ : failed++;
                    
                    container.innerHTML += `
                        <div style="padding: 6px 0; display: flex; gap: 8px; align-items: center;">
                            <span style="color: ${result ? '#4ADE80' : '#F87171'};">${result ? '‚úì' : '‚úó'}</span>
                            <span style="color: ${result ? '#E5E5E5' : '#9CA3AF'};">${test.name}</span>
                        </div>
                    `;
                } catch(e) {
                    failed++;
                    container.innerHTML += `
                        <div style="padding: 6px 0; display: flex; gap: 8px; align-items: center;">
                            <span style="color: #F87171;">‚úó</span>
                            <span style="color: #9CA3AF;">${test.name}: ${e.message}</span>
                        </div>
                    `;
                }
            });
            
            // Reset to connection mode after tests
            setMode('connection');
            
            log(`Tests: ${passed} passed, ${failed} failed`, failed === 0 ? 'success' : 'error');
        }

        // =============================================
        // Logging
        // =============================================
        function log(message, type = 'info') {
            const logEl = document.getElementById('test-log');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logEl.appendChild(entry);
            logEl.scrollTop = logEl.scrollHeight;
            
            // Keep only last 20 entries
            while (logEl.children.length > 20) {
                logEl.removeChild(logEl.firstChild);
            }
        }

        // =============================================
        // Keyboard Shortcuts
        // =============================================
        document.addEventListener('keydown', (e) => {
            if (e.target.matches('input, textarea')) return;
            
            const key = e.key.toLowerCase();
            
            if (e.ctrlKey && key === 'k') {
                e.preventDefault();
                document.getElementById('btn-connection').click();
                return;
            }
            
            switch(key) {
                case 'm':
                    document.getElementById('btn-monitoring').click();
                    break;
                case 'a':
                    document.getElementById('btn-analysis').click();
                    break;
                case 's':
                    if (!e.ctrlKey) document.getElementById('btn-simulation').click();
                    break;
                case 'd':
                    const debugBtn = document.getElementById('btn-debug');
                    if (!debugBtn.classList.contains('disabled')) {
                        debugBtn.click();
                    }
                    break;
            }
        });

        // Initialize on load
        document.addEventListener('DOMContentLoaded', init);
        
        // Console exports
        window.applyStyles = applyStyles;
        window.setMode = setMode;
        window.setSubMode = setSubMode;
        window.setBackendStatus = setBackendStatus;
        window.setDBStatus = setDBStatus;
        window.setFPS = setFPS;
        window.setMemory = setMemory;
        
        console.log('üß™ Sidebar Test v2.1 Loaded');
        console.log('Changes: Icon order, Floating effect, Debug disable, Stroke=1, Size=36, StatusBar=36px');
    </script>

</body>
</html>
