<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß™ Equipment Info Panel Mock Test (v3.1.0)</title>
    
    <!-- =============================================
         CSS Í∞úÎ≥Ñ Î°úÎìú (Î∞©Î≤ï 2)
         - ÌïÑÏöîÌïú ÌååÏùºÎßå Î°úÎìú
         - Í≤ΩÎ°ú: tests/ Ìè¥Îçî Í∏∞Ï§Ä ../styles/
         ============================================= -->
    <link rel="stylesheet" href="../styles/base/_variables.css">
    <link rel="stylesheet" href="../styles/base/_reset.css">
    <link rel="stylesheet" href="../styles/components/_panels.css">
    <link rel="stylesheet" href="../styles/components/_equipment-info-panel.css">
    
    <style>
        /* =============================================
           ÌÖåÏä§Ìä∏ ÌéòÏù¥ÏßÄ Ï†ÑÏö© Ïä§ÌÉÄÏùº
           (v3.1.0 CSSÎäî GitHubÏùò _equipment-info-panel.cssÏóê Ïù¥ÎØ∏ Ï†ïÏùòÎê®)
           ============================================= */
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            font-family: var(--font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);
            color: #fff;
        }
        
        .test-page {
            display: flex;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* ÏôºÏ™Ω: ÌÖåÏä§Ìä∏ Ïª®Ìä∏Î°§ */
        .test-controls {
            flex: 0 0 400px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            height: fit-content;
        }
        
        .test-controls h1 {
            color: #4da6ff;
            font-size: 18px;
            margin: 0 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .test-section {
            margin-bottom: 20px;
        }
        
        .test-section h2 {
            color: #9ca3af;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin: 0 0 10px 0;
        }
        
        .btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .test-btn {
            padding: 8px 14px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .test-btn:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }
        
        .test-btn.run { background: #22c55e; }
        .test-btn.run:hover { background: #16a34a; }
        
        .test-btn.idle { background: #eab308; color: #000; }
        .test-btn.idle:hover { background: #ca8a04; }
        
        .test-btn.stop { background: #ef4444; }
        .test-btn.stop:hover { background: #dc2626; }
        
        .test-btn.sudden { background: #f97316; }
        .test-btn.sudden:hover { background: #ea580c; }
        
        .test-btn.secondary { background: #4b5563; }
        .test-btn.secondary:hover { background: #374151; }
        
        .test-btn.primary { background: #6366f1; }
        .test-btn.primary:hover { background: #4f46e5; }
        
        /* Ïò§Î•∏Ï™Ω: Ìå®ÎÑê ÏòÅÏó≠ */
        .panel-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 600px;
            position: relative;
        }
        
        /* Equipment Info Panel ÏúÑÏπò Ïò§Î≤ÑÎùºÏù¥Îìú (ÌÖåÏä§Ìä∏Ïö©) */
        #equipmentInfo {
            position: relative !important;
            top: auto !important;
            right: auto !important;
            transform: none !important;
        }
        
        /* Î°úÍ∑∏ Ïª®ÌÖåÏù¥ÎÑà */
        .log-container {
            background: #000;
            border-radius: 8px;
            padding: 12px;
            height: 150px;
            overflow-y: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 11px;
            margin-top: 15px;
        }
        
        .log-entry {
            margin: 3px 0;
            padding: 3px 6px;
            border-radius: 3px;
        }
        
        .log-entry.info { background: rgba(59, 130, 246, 0.2); color: #93c5fd; }
        .log-entry.success { background: rgba(34, 197, 94, 0.2); color: #86efac; }
        .log-entry.warning { background: rgba(234, 179, 8, 0.2); color: #fde047; }
        .log-entry.error { background: rgba(239, 68, 68, 0.2); color: #fca5a5; }
        
        /* ÏÉÅÌÉú ÌëúÏãú */
        .status-indicator-test {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: rgba(255,255,255,0.05);
            border-radius: 6px;
            font-size: 12px;
            margin-top: 15px;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #22c55e;
        }
        
        .status-dot.inactive { background: #ef4444; }
    </style>
</head>
<body>
    <div class="test-page">
        <!-- ÏôºÏ™Ω: ÌÖåÏä§Ìä∏ Ïª®Ìä∏Î°§ -->
        <div class="test-controls">
            <h1>üß™ Equipment Info Panel Test (v3.1.0)</h1>
            
            <!-- Single Selection: ÏÉÅÌÉúÎ≥Ñ -->
            <div class="test-section">
                <h2>üìå Single Selection - Status</h2>
                <div class="btn-group">
                    <button class="test-btn run" onclick="showSingle('RUN')">RUN</button>
                    <button class="test-btn idle" onclick="showSingle('IDLE')">IDLE</button>
                    <button class="test-btn stop" onclick="showSingle('STOP')">STOP</button>
                    <button class="test-btn sudden" onclick="showSingle('SUDDENSTOP')">SUDDEN</button>
                    <button class="test-btn secondary" onclick="showSingle('DISCONNECTED')">DISC</button>
                </div>
            </div>
            
            <!-- Lot Active / Inactive -->
            <div class="test-section">
                <h2>üìå Lot Active vs Inactive</h2>
                <div class="btn-group">
                    <button class="test-btn run" onclick="showLotActive()">‚úÖ Lot Active</button>
                    <button class="test-btn secondary" onclick="showLotInactive()">‚ùå Lot Inactive</button>
                    <button class="test-btn secondary" onclick="showLotInactiveNoSince()">‚ùå No Since</button>
                </div>
            </div>
            
            <!-- Multi Selection -->
            <div class="test-section">
                <h2>üìå Multi Selection</h2>
                <div class="btn-group">
                    <button class="test-btn primary" onclick="showMulti(3)">3Í∞ú ÏÑ†ÌÉù</button>
                    <button class="test-btn primary" onclick="showMulti(5)">5Í∞ú ÏÑ†ÌÉù</button>
                    <button class="test-btn primary" onclick="showMulti(10)">10Í∞ú ÏÑ†ÌÉù</button>
                </div>
            </div>
            
            <!-- PC Info Tab -->
            <div class="test-section">
                <h2>üìå PC Info Tab</h2>
                <div class="btn-group">
                    <button class="test-btn primary" onclick="showPCInfo('normal')">Ï†ïÏÉÅ (30%)</button>
                    <button class="test-btn idle" onclick="showPCInfo('warning')">Í≤ΩÍ≥† (70%)</button>
                    <button class="test-btn sudden" onclick="showPCInfo('critical')">ÏúÑÌóò (95%)</button>
                </div>
            </div>
            
            <!-- Disk D ÌÖåÏä§Ìä∏ -->
            <div class="test-section">
                <h2>üìå Disk D Ïú†Î¨¥</h2>
                <div class="btn-group">
                    <button class="test-btn primary" onclick="showDiskD(true)">D: ÏûàÏùå</button>
                    <button class="test-btn secondary" onclick="showDiskD(false)">D: ÏóÜÏùå (N/A)</button>
                </div>
            </div>
            
            <!-- Tab Ï†ÑÌôò -->
            <div class="test-section">
                <h2>üìå Tab Ï†ÑÌôò</h2>
                <div class="btn-group">
                    <button class="test-btn secondary" onclick="switchTab('general')">General Tab</button>
                    <button class="test-btn secondary" onclick="switchTab('pcinfo')">PC Info Tab</button>
                </div>
            </div>
            
            <!-- Ìå®ÎÑê Ï†úÏñ¥ -->
            <div class="test-section">
                <h2>üõ†Ô∏è Ìå®ÎÑê Ï†úÏñ¥</h2>
                <div class="btn-group">
                    <button class="test-btn secondary" onclick="hidePanel()">Ìå®ÎÑê Îã´Í∏∞</button>
                    <button class="test-btn secondary" onclick="showPanel()">Ìå®ÎÑê Ïó¥Í∏∞</button>
                    <button class="test-btn secondary" onclick="clearLogs()">Î°úÍ∑∏ ÏßÄÏö∞Í∏∞</button>
                </div>
            </div>
            
            <!-- Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏ ÏãúÎÆ¨Î†àÏù¥ÏÖò -->
            <div class="test-section">
                <h2>‚ö° Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏</h2>
                <div class="btn-group">
                    <button class="test-btn run" onclick="simulateRealtime()">‚ñ∂ ÏãúÏûë (3Ï¥à)</button>
                    <button class="test-btn stop" onclick="stopRealtime()">‚ñ† Ï§ëÏßÄ</button>
                </div>
            </div>
            
            <!-- ÏÉÅÌÉú ÌëúÏãú -->
            <div class="status-indicator-test">
                <span class="status-dot" id="panelStatusDot"></span>
                <span id="panelStatusText">Panel: ÎπÑÌôúÏÑ±</span>
            </div>
            
            <!-- Î°úÍ∑∏ -->
            <div class="log-container" id="logContainer">
                <div class="log-entry info">[ÏãúÏûë] ÌÖåÏä§Ìä∏ ÌéòÏù¥ÏßÄ Î°úÎìúÎê®</div>
            </div>
        </div>
        
        <!-- Ïò§Î•∏Ï™Ω: Equipment Info Panel -->
        <div class="panel-area">
            <div id="equipmentInfo">
                <button class="close-btn" onclick="hidePanel()">√ó</button>
                
                <!-- Header (Name + Status) -->
                <div class="equipment-panel-header">
                    <h2 id="equipName" class="equipment-panel-title">ÏÑ§ÎπÑ Ï†ïÎ≥¥</h2>
                    <div class="header-status" id="headerStatus">
                        <span class="status-indicator" id="headerStatusIndicator"></span>
                        <span class="status-text" id="headerStatusText">-</span>
                    </div>
                </div>
                
                <!-- Tab Header -->
                <div class="equipment-panel-tabs">
                    <button class="equipment-tab active" data-tab="general" onclick="switchTab('general')">General</button>
                    <button class="equipment-tab" data-tab="pcinfo" onclick="switchTab('pcinfo')">PC Info.</button>
                </div>
                
                <!-- Tab Content -->
                <div class="equipment-panel-content">
                    <!-- General Tab -->
                    <div id="tab-general" class="equipment-tab-content active">
                        <div id="generalTabContent">
                            <div class="info-row placeholder">
                                <span class="info-label">Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ ÌÖåÏä§Ìä∏</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- PC Info Tab -->
                    <div id="tab-pcinfo" class="equipment-tab-content">
                        <div id="pcinfoTabContent">
                            <div class="info-row placeholder">
                                <span class="info-label">PC InfoÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // =============================================
        // Ï†ÑÏó≠ ÏÉÅÌÉú
        // =============================================
        let currentTab = 'general';
        let durationTimer = null;
        let realtimeTimer = null;
        let durationBaseTime = null;
        
        // =============================================
        // Î°úÍ∑∏ Ìï®Ïàò
        // =============================================
        function log(message, type = 'info') {
            const container = document.getElementById('logContainer');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            const time = new Date().toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            entry.textContent = `[${time}] ${message}`;
            container.appendChild(entry);
            container.scrollTop = container.scrollHeight;
        }
        
        function clearLogs() {
            document.getElementById('logContainer').innerHTML = '';
            log('Î°úÍ∑∏ Ï¥àÍ∏∞ÌôîÎê®', 'info');
        }
        
        // =============================================
        // Ìå®ÎÑê Ï†úÏñ¥
        // =============================================
        function showPanel() {
            document.getElementById('equipmentInfo').classList.add('active');
            document.getElementById('panelStatusDot').classList.remove('inactive');
            document.getElementById('panelStatusText').textContent = 'Panel: ÌôúÏÑ±';
            log('Ìå®ÎÑê Ïó¥Î¶º', 'success');
        }
        
        function hidePanel() {
            document.getElementById('equipmentInfo').classList.remove('active');
            document.getElementById('panelStatusDot').classList.add('inactive');
            document.getElementById('panelStatusText').textContent = 'Panel: ÎπÑÌôúÏÑ±';
            stopDurationTimer();
            log('Ìå®ÎÑê Îã´Ìûò', 'info');
        }
        
        // =============================================
        // Tab Ï†ÑÌôò
        // =============================================
        function switchTab(tabName) {
            currentTab = tabName;
            
            // Tab Î≤ÑÌäº ÌôúÏÑ±Ìôî
            document.querySelectorAll('.equipment-tab').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.tab === tabName);
            });
            
            // Tab Ïª®ÌÖêÏ∏† ÌëúÏãú
            document.querySelectorAll('.equipment-tab-content').forEach(content => {
                const contentTab = content.id.replace('tab-', '');
                content.classList.toggle('active', contentTab === tabName);
            });
            
            log(`Tab Ï†ÑÌôò: ${tabName}`, 'info');
        }
        
        // =============================================
        // Header Status ÏóÖÎç∞Ïù¥Ìä∏
        // =============================================
        function updateHeaderStatus(status) {
            const indicator = document.getElementById('headerStatusIndicator');
            const text = document.getElementById('headerStatusText');
            
            const statusClasses = {
                'RUN': 'status-running',
                'IDLE': 'status-idle',
                'STOP': 'status-stop',
                'SUDDENSTOP': 'status-error',
                'DISCONNECTED': 'status-disconnected'
            };
            
            indicator.className = `status-indicator ${statusClasses[status] || ''}`;
            text.textContent = status || '-';
        }
        
        // =============================================
        // Duration Timer
        // =============================================
        function startDurationTimer(baseTime) {
            stopDurationTimer();
            if (!baseTime) return;
            
            durationBaseTime = new Date(baseTime);
            
            function updateDuration() {
                const el = document.getElementById('durationDisplay');
                if (!el) return;
                el.textContent = formatDuration(durationBaseTime);
            }
            
            updateDuration();
            durationTimer = setInterval(updateDuration, 1000);
        }
        
        function stopDurationTimer() {
            if (durationTimer) {
                clearInterval(durationTimer);
                durationTimer = null;
            }
        }
        
        function formatDuration(startTime) {
            if (!startTime) return '-';
            
            const now = new Date();
            let diffMs = now - startTime;
            if (diffMs < 0) diffMs = 0;
            
            const days = Math.floor(diffMs / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diffMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diffMs % (1000 * 60)) / 1000);
            
            if (days > 0) {
                return `${days}day ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
            return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function formatDateTime(isoString) {
            if (!isoString) return '-';
            try {
                const date = new Date(isoString);
                return date.toLocaleString('ko-KR', {
                    year: 'numeric', month: '2-digit', day: '2-digit',
                    hour: '2-digit', minute: '2-digit'
                });
            } catch {
                return isoString;
            }
        }
        
        // =============================================
        // Gauge ÏÉâÏÉÅ
        // =============================================
        function getGaugeColor(percent) {
            if (percent === null || percent === undefined) return 'gauge-gray';
            if (percent < 50) return 'gauge-green';
            if (percent < 80) return 'gauge-yellow';
            return 'gauge-red';
        }
        
        // =============================================
        // Single Selection ÌëúÏãú
        // =============================================
        function showSingle(status) {
            showPanel();
            
            document.getElementById('equipName').textContent = 'CUT-075';
            updateHeaderStatus(status);
            document.getElementById('headerStatus').style.display = 'flex';
            
            // Lot Active ÏÉÅÌÉúÎ°ú ÌëúÏãú
            const now = new Date();
            const lotStart = new Date(now - 2 * 60 * 60 * 1000); // 2ÏãúÍ∞Ñ Ï†Ñ
            
            updateGeneralTab({
                is_lot_active: true,
                line_name: 'LINE-A',
                product_model: 'MODEL-2024-A',
                lot_id: 'LOT-20250109-001',
                lot_start_time: lotStart.toISOString(),
                last_updated: now.toISOString()
            });
            
            updatePCInfoTab({
                cpu_usage_percent: 45.2,
                memory_total_gb: 32,
                memory_used_gb: 18.5,
                disk_c_total_gb: 256,
                disk_c_used_gb: 120,
                disk_d_total_gb: 512,
                disk_d_used_gb: 280,
                cpu_name: 'Intel Core i7-12700K @ 3.60GHz',
                cpu_logical_count: 20,
                gpu_name: 'NVIDIA GeForce RTX 3060',
                os_name: 'Windows 10 Pro',
                os_architecture: '64-bit',
                last_boot_time: new Date(now - 5 * 24 * 60 * 60 * 1000).toISOString(),
                pc_last_update_time: now.toISOString()
            });
            
            log(`Single Selection: ${status}`, 'success');
        }
        
        // =============================================
        // Lot Active / Inactive
        // =============================================
        function showLotActive() {
            showPanel();
            
            document.getElementById('equipName').textContent = 'CUT-075';
            updateHeaderStatus('RUN');
            document.getElementById('headerStatus').style.display = 'flex';
            
            const now = new Date();
            const lotStart = new Date(now - 3 * 60 * 60 * 1000); // 3ÏãúÍ∞Ñ Ï†Ñ
            
            updateGeneralTab({
                is_lot_active: true,
                line_name: 'LINE-A',
                product_model: 'PRODUCT-X500',
                lot_id: 'LOT-20250109-002',
                lot_start_time: lotStart.toISOString(),
                last_updated: now.toISOString()
            });
            
            log('Lot Active ÏÉÅÌÉú ÌëúÏãú', 'success');
        }
        
        function showLotInactive() {
            showPanel();
            
            document.getElementById('equipName').textContent = 'CUT-076';
            updateHeaderStatus('IDLE');
            document.getElementById('headerStatus').style.display = 'flex';
            
            const now = new Date();
            const sinceTime = new Date(now - 45 * 60 * 1000); // 45Î∂Ñ Ï†Ñ
            
            updateGeneralTab({
                is_lot_active: false,
                line_name: 'LINE-B',
                since_time: sinceTime.toISOString(),
                last_updated: now.toISOString()
            });
            
            log('Lot Inactive ÏÉÅÌÉú ÌëúÏãú (with Since)', 'success');
        }
        
        function showLotInactiveNoSince() {
            showPanel();
            
            document.getElementById('equipName').textContent = 'CUT-077';
            updateHeaderStatus('DISCONNECTED');
            document.getElementById('headerStatus').style.display = 'flex';
            
            updateGeneralTab({
                is_lot_active: false,
                line_name: 'LINE-C',
                since_time: null,
                last_updated: new Date().toISOString()
            });
            
            log('Lot Inactive ÏÉÅÌÉú ÌëúÏãú (no Since)', 'success');
        }
        
        // =============================================
        // General Tab ÏóÖÎç∞Ïù¥Ìä∏
        // =============================================
        function updateGeneralTab(data) {
            const container = document.getElementById('generalTabContent');
            const isLotActive = data.is_lot_active === true;
            
            let lotInfoHTML = '';
            
            if (isLotActive) {
                const durationDisplay = formatDuration(new Date(data.lot_start_time));
                startDurationTimer(data.lot_start_time);
                
                lotInfoHTML = `
                    <div class="info-row">
                        <span class="info-label">Product:</span>
                        <span class="info-value">${data.product_model || '-'}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Lot No.:</span>
                        <span class="info-value">${data.lot_id || '-'}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Lot Start:</span>
                        <span class="info-value">${formatDateTime(data.lot_start_time) || '-'}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Lot Duration:</span>
                        <span class="info-value" id="durationDisplay">${durationDisplay}</span>
                    </div>
                `;
            } else {
                const hasSinceTime = data.since_time != null;
                const durationDisplay = hasSinceTime ? formatDuration(new Date(data.since_time)) : '-';
                
                if (hasSinceTime) {
                    startDurationTimer(data.since_time);
                } else {
                    stopDurationTimer();
                }
                
                lotInfoHTML = `
                    <div class="info-row">
                        <span class="info-label">Product:</span>
                        <span class="info-value">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Lot No.:</span>
                        <span class="info-value">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Since:</span>
                        <span class="info-value">${hasSinceTime ? formatDateTime(data.since_time) : '-'}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Duration:</span>
                        <span class="info-value" id="durationDisplay">${durationDisplay}</span>
                    </div>
                `;
            }
            
            container.innerHTML = `
                <div class="info-row">
                    <span class="info-label">Line:</span>
                    <span class="info-value">${data.line_name || '-'}</span>
                </div>
                
                <div class="info-row-divider"></div>
                
                ${lotInfoHTML}
                
                ${data.last_updated ? `
                <div class="info-row info-row-meta">
                    <span class="info-label">Updated:</span>
                    <span class="info-value info-value-meta">${formatDateTime(data.last_updated)}</span>
                </div>
                ` : ''}
            `;
        }
        
        // =============================================
        // PC Info Tab ÏóÖÎç∞Ïù¥Ìä∏ (v3.1.0 ÏÉà Î†àÏù¥ÏïÑÏõÉ - GitHub CSS ÌÅ¥ÎûòÏä§ ÏÇ¨Ïö©)
        // =============================================
        function updatePCInfoTab(data) {
            const container = document.getElementById('pcinfoTabContent');
            
            // CPU
            const cpuPercent = data.cpu_usage_percent ?? null;
            const cpuGaugeColor = getGaugeColor(cpuPercent);
            
            // Memory
            const memoryTotal = data.memory_total_gb ?? null;
            const memoryUsed = data.memory_used_gb ?? null;
            const memoryPercent = (memoryTotal && memoryUsed) 
                ? Math.round((memoryUsed / memoryTotal) * 100) 
                : null;
            const memoryGaugeColor = getGaugeColor(memoryPercent);
            
            // Disk C
            const diskCTotal = data.disk_c_total_gb ?? null;
            const diskCUsed = data.disk_c_used_gb ?? null;
            const diskCPercent = (diskCTotal && diskCUsed) 
                ? Math.round((diskCUsed / diskCTotal) * 100) 
                : null;
            const diskCGaugeColor = getGaugeColor(diskCPercent);
            
            // Disk D
            const diskDTotal = data.disk_d_total_gb ?? null;
            const diskDUsed = data.disk_d_used_gb ?? null;
            const hasDiskD = diskDTotal !== null && diskDTotal > 0;
            const diskDPercent = (diskDTotal && diskDUsed) 
                ? Math.round((diskDUsed / diskDTotal) * 100) 
                : null;
            const diskDGaugeColor = getGaugeColor(diskDPercent);
            
            // Boot Duration
            const bootDuration = formatBootDuration(data.last_boot_time);
            const bootDurationClass = getBootDurationClass(data.last_boot_time);
            
            // üÜï v3.1.0: CPU Ïù¥Î¶Ñ Ï§ÑÏù¥Í∏∞
            const cpuShortName = shortenCpuName(data.cpu_name);
            
            container.innerHTML = `
                <!-- üÜï v3.1.0: System Info (Ìï©Ï≥êÏßÑ Î†àÏù¥ÏïÑÏõÉ) - GitHub: .pcinfo-system-row -->
                <div class="pcinfo-system-row">
                    <span class="info-label">CPU</span>
                    <span class="info-value">${cpuShortName || '-'}, ${data.cpu_logical_count || '-'} Cores</span>
                </div>
                <div class="pcinfo-system-row">
                    <span class="info-label">GPU</span>
                    <span class="info-value info-value-small">${data.gpu_name || '-'}</span>
                </div>
                <div class="pcinfo-system-row">
                    <span class="info-label">OS</span>
                    <span class="info-value">${data.os_name || '-'}, ${data.os_architecture || '-'}</span>
                </div>
                <div class="pcinfo-system-row">
                    <span class="info-label">Boot</span>
                    <span class="info-value">
                        <span class="boot-duration ${bootDurationClass}">
                            <span class="boot-duration-value">${bootDuration}</span>
                        </span>
                    </span>
                </div>
                
                <!-- üÜï v3.1.0: Gauge Section - GitHub: .gauge-section -->
                <div class="gauge-section">
                    <div class="gauge-section-title">Resource Usage</div>
                    
                    <!-- üÜï v3.1.0: ÌÜµÏùºÎêú Gauge - GitHub: .unified-gauge-* -->
                    <div class="unified-gauge-row">
                        <span class="unified-gauge-label">CPU</span>
                        <div class="unified-gauge-container">
                            <div class="unified-gauge-bar">
                                <div class="unified-gauge-fill ${cpuGaugeColor}" style="width: ${cpuPercent ?? 0}%"></div>
                            </div>
                            <span class="unified-gauge-value">${cpuPercent !== null ? cpuPercent.toFixed(1) + '%' : '-'}</span>
                        </div>
                    </div>
                    
                    <div class="unified-gauge-row">
                        <span class="unified-gauge-label">Mem</span>
                        <div class="unified-gauge-container">
                            <div class="unified-gauge-bar">
                                <div class="unified-gauge-fill ${memoryGaugeColor}" style="width: ${memoryPercent ?? 0}%"></div>
                            </div>
                            <span class="unified-gauge-value">${memoryUsed?.toFixed(1) ?? '-'}/${memoryTotal?.toFixed(0) ?? '-'} GB</span>
                        </div>
                    </div>
                    
                    <div class="unified-gauge-row">
                        <span class="unified-gauge-label">C:</span>
                        <div class="unified-gauge-container">
                            <div class="unified-gauge-bar">
                                <div class="unified-gauge-fill ${diskCGaugeColor}" style="width: ${diskCPercent ?? 0}%"></div>
                            </div>
                            <span class="unified-gauge-value">${diskCUsed?.toFixed(0) ?? '-'}/${diskCTotal?.toFixed(0) ?? '-'} GB</span>
                        </div>
                    </div>
                    
                    <div class="unified-gauge-row">
                        <span class="unified-gauge-label">D:</span>
                        ${hasDiskD ? `
                        <div class="unified-gauge-container">
                            <div class="unified-gauge-bar">
                                <div class="unified-gauge-fill ${diskDGaugeColor}" style="width: ${diskDPercent ?? 0}%"></div>
                            </div>
                            <span class="unified-gauge-value">${diskDUsed?.toFixed(0) ?? '-'}/${diskDTotal?.toFixed(0) ?? '-'} GB</span>
                        </div>
                        ` : `
                        <span class="unified-gauge-na">N/A</span>
                        `}
                    </div>
                </div>
                
                ${data.pc_last_update_time ? `
                <div class="info-row info-row-meta">
                    <span class="info-label">Updated:</span>
                    <span class="info-value info-value-meta">${formatDateTime(data.pc_last_update_time)}</span>
                </div>
                ` : ''}
            `;
        }
        
        // üÜï v3.1.0: CPU Ïù¥Î¶Ñ Ï§ÑÏù¥Í∏∞
        function shortenCpuName(cpuName) {
            if (!cpuName) return '-';
            // "Intel Core i7-12700K @ 3.60GHz" -> "i7-12700K"
            // "AMD Ryzen 9 5900X 12-Core Processor" -> "Ryzen 9 5900X"
            
            let short = cpuName;
            
            // Intel: "Intel(R) Core(TM) i7-12700K CPU @ 3.60GHz" -> "i7-12700K"
            const intelMatch = cpuName.match(/i[3579]-\d{4,5}[A-Z]*/i);
            if (intelMatch) {
                return intelMatch[0];
            }
            
            // AMD: "AMD Ryzen 9 5900X" -> "Ryzen 9 5900X"
            const amdMatch = cpuName.match(/Ryzen\s+\d+\s+\d{4}[A-Z]*/i);
            if (amdMatch) {
                return amdMatch[0];
            }
            
            // Í∏∞ÌÉÄ: @ Ïù¥Ï†ÑÍπåÏßÄÎßå
            if (cpuName.includes('@')) {
                short = cpuName.split('@')[0].trim();
            }
            
            // ÎÑàÎ¨¥ Í∏∏Î©¥ ÏûêÎ•¥Í∏∞
            if (short.length > 20) {
                short = short.substring(0, 20) + '...';
            }
            
            return short;
        }
        
        function formatBootDuration(lastBootTime) {
            if (!lastBootTime) return '-';
            
            try {
                const bootTime = new Date(lastBootTime);
                const now = new Date();
                let diffMs = now - bootTime;
                if (diffMs < 0) diffMs = 0;
                
                const days = Math.floor(diffMs / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diffMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));
                
                if (days > 0) {
                    return `${days}d ${hours}h ${minutes}m`;
                } else if (hours > 0) {
                    return `${hours}h ${minutes}m`;
                } else {
                    return `${minutes}m`;
                }
            } catch (e) {
                return '-';
            }
        }
        
        function getBootDurationClass(lastBootTime) {
            if (!lastBootTime) return '';
            
            try {
                const bootTime = new Date(lastBootTime);
                const now = new Date();
                const diffDays = (now - bootTime) / (1000 * 60 * 60 * 24);
                
                if (diffDays >= 30) return 'danger';
                if (diffDays >= 14) return 'warning';
                return '';
            } catch (e) {
                return '';
            }
        }
        
        // =============================================
        // PC Info Î†àÎ≤® ÌÖåÏä§Ìä∏
        // =============================================
        function showPCInfo(level) {
            showPanel();
            switchTab('pcinfo');
            
            document.getElementById('equipName').textContent = 'CUT-075';
            updateHeaderStatus('RUN');
            document.getElementById('headerStatus').style.display = 'flex';
            
            const now = new Date();
            let cpu, memory, diskC, diskD;
            
            switch (level) {
                case 'normal':
                    cpu = 28.5; memory = 10; diskC = 80; diskD = 150;
                    break;
                case 'warning':
                    cpu = 72.3; memory = 22; diskC = 180; diskD = 380;
                    break;
                case 'critical':
                    cpu = 95.8; memory = 30; diskC = 240; diskD = 490;
                    break;
            }
            
            updatePCInfoTab({
                cpu_usage_percent: cpu,
                memory_total_gb: 32,
                memory_used_gb: memory,
                disk_c_total_gb: 256,
                disk_c_used_gb: diskC,
                disk_d_total_gb: 512,
                disk_d_used_gb: diskD,
                cpu_name: 'Intel Core i7-12700K @ 3.60GHz',
                cpu_logical_count: 20,
                gpu_name: 'NVIDIA GeForce RTX 3060',
                os_name: 'Windows 10 Pro',
                os_architecture: '64-bit',
                last_boot_time: new Date(now - 5 * 24 * 60 * 60 * 1000).toISOString(),
                pc_last_update_time: now.toISOString()
            });
            
            log(`PC Info: ${level} Î†àÎ≤® ÌëúÏãú`, 'success');
        }
        
        // =============================================
        // Disk D ÌÖåÏä§Ìä∏
        // =============================================
        function showDiskD(hasDiskD) {
            showPanel();
            switchTab('pcinfo');
            
            document.getElementById('equipName').textContent = 'CUT-075';
            updateHeaderStatus('RUN');
            document.getElementById('headerStatus').style.display = 'flex';
            
            const now = new Date();
            
            updatePCInfoTab({
                cpu_usage_percent: 45.2,
                memory_total_gb: 32,
                memory_used_gb: 18.5,
                disk_c_total_gb: 256,
                disk_c_used_gb: 120,
                disk_d_total_gb: hasDiskD ? 512 : null,
                disk_d_used_gb: hasDiskD ? 280 : null,
                cpu_name: 'Intel Core i7-12700K @ 3.60GHz',
                cpu_logical_count: 20,
                gpu_name: 'NVIDIA GeForce RTX 3060',
                os_name: 'Windows 10 Pro',
                os_architecture: '64-bit',
                last_boot_time: new Date(now - 5 * 24 * 60 * 60 * 1000).toISOString(),
                pc_last_update_time: now.toISOString()
            });
            
            log(`Disk D: ${hasDiskD ? 'ÏûàÏùå' : 'ÏóÜÏùå (N/A)'}`, 'success');
        }
        
        // =============================================
        // Multi Selection
        // =============================================
        function showMulti(count) {
            showPanel();
            switchTab('general');
            
            document.getElementById('equipName').textContent = `${count}Í∞ú ÏÑ§ÎπÑ ÏÑ†ÌÉùÎê®`;
            document.getElementById('equipName').classList.add('multi-select');
            document.getElementById('headerStatus').style.display = 'none';
            stopDurationTimer();
            
            // Mock ÏßëÍ≥Ñ Îç∞Ïù¥ÌÑ∞
            const statusCounts = {
                'RUN': Math.floor(count * 0.5),
                'IDLE': Math.floor(count * 0.3),
                'STOP': count - Math.floor(count * 0.5) - Math.floor(count * 0.3)
            };
            
            updateGeneralTabMulti({
                count: count,
                lines: ['LINE-A', 'LINE-B', 'LINE-C'],
                lines_more: count > 3,
                status_counts: statusCounts,
                products: ['MODEL-X100', 'MODEL-X200', 'MODEL-X300'],
                products_more: count > 3,
                lot_ids: ['LOT-001', 'LOT-002', 'LOT-003'],
                lot_ids_more: count > 3
            });
            
            updatePCInfoTabMulti({
                avg_cpu_usage_percent: 52.3,
                avg_memory_usage_percent: 65.4,
                avg_disk_c_usage_percent: 48.7,
                avg_disk_d_usage_percent: count > 5 ? 55.2 : null,
                cpu_names: ['Intel Core i7-12700K', 'Intel Core i5-10400'],
                cpu_names_more: count > 3,
                gpu_names: ['NVIDIA RTX 3060', 'NVIDIA GTX 1660'],
                gpu_names_more: count > 3,
                os_names: ['Windows 10 Pro', 'Windows 11 Pro'],
                os_names_more: false
            }, count);
            
            log(`Multi Selection: ${count}Í∞ú`, 'success');
        }
        
        function updateGeneralTabMulti(data) {
            const container = document.getElementById('generalTabContent');
            
            const linesDisplay = formatListWithMore(data.lines, data.lines_more);
            const statusDisplay = formatStatusCounts(data.status_counts);
            const productsDisplay = formatListWithMore(data.products, data.products_more);
            const lotIdsDisplay = formatListWithMore(data.lot_ids, data.lot_ids_more);
            
            container.innerHTML = `
                <div class="info-row multi-select-header">
                    <span class="info-icon">üìä</span>
                    <span class="info-text">${data.count}Í∞ú ÏÑ§ÎπÑ ÏßëÍ≥Ñ Ï†ïÎ≥¥</span>
                    <span class="info-badge">${data.count}Í∞ú Ï°∞ÌöåÎê®</span>
                </div>
                
                <div class="info-row">
                    <span class="info-label">Line:</span>
                    <span class="info-value">${linesDisplay || '-'}</span>
                </div>
                
                <div class="info-row status-row">
                    <span class="info-label">Status:</span>
                    <div class="status-counts">
                        ${statusDisplay}
                    </div>
                </div>
                
                <div class="info-row">
                    <span class="info-label">Product:</span>
                    <span class="info-value">${productsDisplay || '-'}</span>
                </div>
                
                <div class="info-row">
                    <span class="info-label">Lot No.:</span>
                    <span class="info-value">${lotIdsDisplay || '-'}</span>
                </div>
                
                <div class="info-row-spacer"></div>
            `;
        }
        
        function updatePCInfoTabMulti(data, totalCount) {
            const container = document.getElementById('pcinfoTabContent');
            
            const avgCpu = data.avg_cpu_usage_percent;
            const cpuGaugeColor = getGaugeColor(avgCpu);
            
            const avgMemory = data.avg_memory_usage_percent;
            const memoryGaugeColor = getGaugeColor(avgMemory);
            
            const avgDiskC = data.avg_disk_c_usage_percent;
            const diskCGaugeColor = getGaugeColor(avgDiskC);
            
            const avgDiskD = data.avg_disk_d_usage_percent;
            const hasDiskD = avgDiskD !== null && avgDiskD !== undefined;
            const diskDGaugeColor = getGaugeColor(avgDiskD);
            
            const cpuNamesDisplay = formatListWithMore(data.cpu_names, data.cpu_names_more);
            const gpuNamesDisplay = formatListWithMore(data.gpu_names, data.gpu_names_more);
            const osNamesDisplay = formatListWithMore(data.os_names, data.os_names_more);
            
            container.innerHTML = `
                <div class="info-row multi-select-header">
                    <span class="info-icon">üíª</span>
                    <span class="info-text">${totalCount}Í∞ú ÏÑ§ÎπÑ PC Ï†ïÎ≥¥</span>
                </div>
                
                <!-- üÜï v3.1.0: System Info ÏöîÏïΩ - GitHub: .pcinfo-system-row -->
                <div class="pcinfo-system-row">
                    <span class="info-label">CPU</span>
                    <span class="info-value info-value-small">${cpuNamesDisplay || '-'}</span>
                </div>
                <div class="pcinfo-system-row">
                    <span class="info-label">GPU</span>
                    <span class="info-value info-value-small">${gpuNamesDisplay || '-'}</span>
                </div>
                <div class="pcinfo-system-row">
                    <span class="info-label">OS</span>
                    <span class="info-value">${osNamesDisplay || '-'}</span>
                </div>
                
                <!-- üÜï v3.1.0: Gauge Section - GitHub: .gauge-section -->
                <div class="gauge-section">
                    <div class="gauge-section-title">Avg Resource Usage</div>
                    
                    <!-- üÜï v3.1.0: ÌÜµÏùºÎêú Gauge - GitHub: .unified-gauge-* -->
                    <div class="unified-gauge-row">
                        <span class="unified-gauge-label">CPU</span>
                        <div class="unified-gauge-container">
                            <div class="unified-gauge-bar">
                                <div class="unified-gauge-fill ${cpuGaugeColor}" style="width: ${avgCpu || 0}%"></div>
                            </div>
                            <span class="unified-gauge-value">${avgCpu !== null ? avgCpu.toFixed(1) + '%' : '-'}</span>
                        </div>
                    </div>
                    
                    <div class="unified-gauge-row">
                        <span class="unified-gauge-label">Mem</span>
                        <div class="unified-gauge-container">
                            <div class="unified-gauge-bar">
                                <div class="unified-gauge-fill ${memoryGaugeColor}" style="width: ${avgMemory || 0}%"></div>
                            </div>
                            <span class="unified-gauge-value">${avgMemory !== null ? avgMemory.toFixed(1) + '%' : '-'}</span>
                        </div>
                    </div>
                    
                    <div class="unified-gauge-row">
                        <span class="unified-gauge-label">C:</span>
                        <div class="unified-gauge-container">
                            <div class="unified-gauge-bar">
                                <div class="unified-gauge-fill ${diskCGaugeColor}" style="width: ${avgDiskC || 0}%"></div>
                            </div>
                            <span class="unified-gauge-value">${avgDiskC !== null ? avgDiskC.toFixed(1) + '%' : '-'}</span>
                        </div>
                    </div>
                    
                    <div class="unified-gauge-row">
                        <span class="unified-gauge-label">D:</span>
                        ${hasDiskD ? `
                        <div class="unified-gauge-container">
                            <div class="unified-gauge-bar">
                                <div class="unified-gauge-fill ${diskDGaugeColor}" style="width: ${avgDiskD || 0}%"></div>
                            </div>
                            <span class="unified-gauge-value">${avgDiskD.toFixed(1)}%</span>
                        </div>
                        ` : `
                        <span class="unified-gauge-na">N/A (ÏùºÎ∂Ä D: ÏóÜÏùå)</span>
                        `}
                    </div>
                </div>
            `;
        }
        
        function formatListWithMore(items, hasMore) {
            if (!items || items.length === 0) return '-';
            
            const displayItems = items.slice(0, 3);
            let result = displayItems.join(', ');
            
            if (hasMore || items.length > 3) {
                const moreCount = items.length > 3 ? items.length - 3 : '...';
                result += ` <span class="more-count">Ïô∏ ${moreCount}Í∞ú</span>`;
            }
            
            return result;
        }
        
        function formatStatusCounts(statusCounts) {
            if (!statusCounts || Object.keys(statusCounts).length === 0) {
                return '<span class="status-count-item">-</span>';
            }
            
            const statusConfig = {
                'RUN': { icon: 'üü¢', class: 'status-running' },
                'IDLE': { icon: 'üü°', class: 'status-idle' },
                'STOP': { icon: 'üî¥', class: 'status-stop' },
                'SUDDENSTOP': { icon: '‚ö†Ô∏è', class: 'status-error' },
                'DISCONNECTED': { icon: '‚ö´', class: 'status-disconnected' }
            };
            
            const sortOrder = ['RUN', 'IDLE', 'STOP', 'SUDDENSTOP', 'DISCONNECTED'];
            
            return sortOrder
                .filter(status => statusCounts[status] > 0)
                .map(status => {
                    const config = statusConfig[status] || { icon: '‚ùì', class: '' };
                    return `
                        <span class="status-count-item ${config.class}">
                            <span class="status-count-icon">${config.icon}</span>
                            <span class="status-count-number">${statusCounts[status]}</span>
                        </span>
                    `;
                })
                .join('');
        }
        
        // =============================================
        // Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏ ÏãúÎÆ¨Î†àÏù¥ÏÖò
        // =============================================
        function simulateRealtime() {
            stopRealtime();
            
            log('Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏ ÏãúÏûë (3Ï¥à Í∞ÑÍ≤©)', 'warning');
            
            let tick = 0;
            const statuses = ['RUN', 'IDLE', 'STOP', 'RUN', 'RUN'];
            
            showSingle('RUN');
            
            realtimeTimer = setInterval(() => {
                tick++;
                const status = statuses[tick % statuses.length];
                
                updateHeaderStatus(status);
                
                // CPU, Memory ÎûúÎç§ Î≥ÄÎèô
                const cpu = 30 + Math.random() * 50;
                const memory = 15 + Math.random() * 10;
                
                updatePCInfoTab({
                    cpu_usage_percent: cpu,
                    memory_total_gb: 32,
                    memory_used_gb: memory,
                    disk_c_total_gb: 256,
                    disk_c_used_gb: 120,
                    disk_d_total_gb: 512,
                    disk_d_used_gb: 280,
                    cpu_name: 'Intel Core i7-12700K @ 3.60GHz',
                    cpu_logical_count: 20,
                    gpu_name: 'NVIDIA GeForce RTX 3060',
                    os_name: 'Windows 10 Pro',
                    os_architecture: '64-bit',
                    last_boot_time: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
                    pc_last_update_time: new Date().toISOString()
                });
                
                log(`Ïã§ÏãúÍ∞Ñ: Status=${status}, CPU=${cpu.toFixed(1)}%`, 'info');
            }, 3000);
        }
        
        function stopRealtime() {
            if (realtimeTimer) {
                clearInterval(realtimeTimer);
                realtimeTimer = null;
                log('Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏ Ï§ëÏßÄ', 'warning');
            }
        }
        
        // =============================================
        // Ï¥àÍ∏∞Ìôî
        // =============================================
        document.addEventListener('DOMContentLoaded', () => {
            log('üéâ Mock ÌÖåÏä§Ìä∏ ÌéòÏù¥ÏßÄ Ï§ÄÎπÑ ÏôÑÎ£å!', 'success');
            log('ÏôºÏ™Ω Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ ÌÖåÏä§Ìä∏ÌïòÏÑ∏Ïöî', 'info');
        });
    </script>
</body>
</html>